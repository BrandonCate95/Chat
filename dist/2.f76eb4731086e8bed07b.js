(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+9Jb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parser=function(e){var t,n,i,s=a.get(e);if(s)return s;r(!!e&&!!e.kind,"Argument of "+e+" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document");var u=e.definitions.filter(function(e){return"FragmentDefinition"===e.kind}),c=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"query"===e.operation}),l=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}),p=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation});r(!u.length||c.length||l.length||p.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"),r(1>=c.length+l.length+p.length,"react-apollo only supports a query, subscription, or a mutation per HOC. "+e+" had "+c.length+" queries, "+p.length+" subscriptions and "+l.length+" mutations. You can use 'compose' to join multiple operation types to a component"),n=c.length?o.Query:o.Mutation,c.length||l.length||(n=o.Subscription);var f=c.length?c:l.length?l:p;r(1===f.length,"react-apollo only supports one defintion per HOC. "+e+" had "+f.length+" definitions. You can use 'compose' to join multiple operation types to a component");var d=f[0];t=d.variableDefinitions||[],i=d.name&&"Name"===d.name.kind?d.name.value:"data";var b={name:i,type:n,variables:t};return a.set(e,b),b};var r=n("QLaP"),o=t.DocumentType=void 0;!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(o||(t.DocumentType=o={}));var a=new Map},"9D75":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n("q1tI")),a=i(n("zGII"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;o>i;i++)a[i]=arguments[i];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={atBottom:!1},r.componentDidMount=function(){r.props.subscribeToNewMessages()},r.handleScroll=function(e){var t=e.target;t.scrollHeight-100>t.offsetHeight+t.scrollTop||3===r.props.networkStatus||!1!==r.state.atBottom?t.offsetHeight+t.scrollTop>t.scrollHeight-100||3===r.props.networkStatus||!0!==r.state.atBottom||r.setState({atBottom:!1}):(r.setState({atBottom:!0}),r.props.nextToken&&r.props.fetchMore(r.props.nextToken))},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){return o.default.createElement("div",{onScroll:this.handleScroll,style:{flex:"30",padding:"0 10px",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"flex-end",minHeight:"0"}},this.props.messages.map(function(e){return o.default.createElement(a.default,{key:e.createdAt,createdAt:e.createdAt,username:e.username},e.content)}))}}]),t}();t.default=u},Dm0L:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.freeze(Object.defineProperties(["\nquery listMessages($conversation: String!, $count: Int, $nextToken: String) {\n    listMessages(conversation: $conversation, count: $count, nextToken: $nextToken) {\n        messages {\n            __typename\n            id\n            content\n            createdAt\n            username\n        }\n        nextToken\n    }\n}"],{raw:{value:Object.freeze(["\nquery listMessages($conversation: String!, $count: Int, $nextToken: String) {\n    listMessages(conversation: $conversation, count: $count, nextToken: $nextToken) {\n        messages {\n            __typename\n            id\n            content\n            createdAt\n            username\n        }\n        nextToken\n    }\n}"])}})),a=n("lTCR"),i=(r=a)&&r.__esModule?r:{default:r};t.default=(0,i.default)(o)},JjuI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.freeze(Object.defineProperties(["\n    subscription NewMessage {\n    newMessage {\n        __typename\n        id\n        content\n        createdAt\n        username\n    }\n}"],{raw:{value:Object.freeze(["\n    subscription NewMessage {\n    newMessage {\n        __typename\n        id\n        content\n        createdAt\n        username\n    }\n}"])}})),a=n("lTCR"),i=(r=a)&&r.__esModule?r:{default:r};t.default=(0,i.default)(o)},NtJX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("q1tI")),o=u(n("eKik")),a=u(n("Dm0L")),i=u(n("JjuI")),s=u(n("9D75"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function(){return r.default.createElement(o.default,{query:a.default,variables:{conversation:"main",count:10},ssr:!0},function(e){var t=e.error,n=e.data,o=e.subscribeToMore,a=e.fetchMore;return e.loading?"Loading...":t?"Error! "+t.message:r.default.createElement(s.default,{messages:n.listMessages.messages,networkStatus:e.networkStatus,nextToken:n.listMessages.nextToken,fetchMore:function(e){return a({variables:{conversation:"main",count:10,nextToken:e},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?Object.assign({},e,{listMessages:{messages:[].concat(c(e.listMessages.messages),c(n.listMessages.messages)),nextToken:n.listMessages.nextToken,__typename:"PaginatedMessages"}}):e}})},subscribeToNewMessages:function(){return o({document:i.default,variables:{conversation:"main"},updateQuery:function(e,t){var n=t.subscriptionData;return n.data?Object.assign({},e,{listMessages:{messages:[n.data.newMessage].concat(c(e.listMessages.messages)),nextToken:e.listMessages.nextToken,__typename:"PaginatedMessages"}}):e}})}})})}},eKik:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("q1tI")),o=s(n("17x9")),a=n("lmy8"),i=n("+9Jb");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var u,c=(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);r.length>o;o++)0>t.indexOf(r[o])&&(n[r[o]]=e[r[o]])}return n},f=n("rzV7"),d=n("QLaP");var b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.previousData={},r.hasMounted=!1,r.startQuerySubscription=function(){if(!r.querySubscription){var e=r.getQueryResult();r.querySubscription=r.queryObservable.subscribe({next:function(t){e&&7===e.networkStatus&&f(e.data,t.data)?e=void 0:(e=void 0,r.updateCurrentData())},error:function(e){if(r.resubscribeToQuery(),!e.hasOwnProperty("graphQLErrors"))throw e;r.updateCurrentData()}})}},r.removeQuerySubscription=function(){r.querySubscription&&(r.querySubscription.unsubscribe(),delete r.querySubscription)},r.updateCurrentData=function(){var e=r.props,t=e.onCompleted,n=e.onError;if(t||n){var o=r.queryObservable.currentResult(),a=o.loading,i=o.error,s=o.data;!t||a||i?n&&!a&&i&&n(i):t(s)}r.hasMounted&&r.forceUpdate()},r.getQueryResult=function(){var e,t={data:Object.create(null)};Object.assign(t,{variables:(e=r.queryObservable).variables,refetch:e.refetch.bind(e),fetchMore:e.fetchMore.bind(e),updateQuery:e.updateQuery.bind(e),startPolling:e.startPolling.bind(e),stopPolling:e.stopPolling.bind(e),subscribeToMore:e.subscribeToMore.bind(e)});var n=r.queryObservable.currentResult(),o=n.loading,i=n.networkStatus,s=n.errors,u=n.error;if(s&&s.length>0&&(u=new a.ApolloError({graphQLErrors:s})),Object.assign(t,{loading:o,networkStatus:i,error:u}),o?Object.assign(t.data,r.previousData,n.data):u?Object.assign(t,{data:(r.queryObservable.getLastResult()||{}).data}):(Object.assign(t.data,n.data),r.previousData=n.data),!r.querySubscription){var c=t.refetch;t.refetch=function(e){return r.querySubscription?c(e):new Promise(function(t,n){r.refetcherQueue={resolve:t,reject:n,args:e}})}}return t.client=r.client,t},r.client=t.client||n.client,d(!!r.client,'Could not find "client" in the context of Query or as passed props. Wrap the root component in an <ApolloProvider>'),r.initializeQueryObservable(t),r}return c(t,e),t.prototype.fetchData=function(){if(this.props.skip)return!1;var e=this.props,t=e.ssr,n=p(e,["children","ssr","displayName","skip","client","onCompleted","onError"]),r=n.fetchPolicy;if(!1===t)return!1;"network-only"!==r&&"cache-and-network"!==r||(r="cache-first");var o=this.client.watchQuery(l({},n,{fetchPolicy:r}));return!!this.queryObservable.currentResult().loading&&o.result()},t.prototype.componentDidMount=function(){if(this.hasMounted=!0,!this.props.skip&&(this.startQuerySubscription(),this.refetcherQueue)){var e=this.refetcherQueue,t=e.resolve,n=e.reject;this.queryObservable.refetch(e.args).then(t).catch(n)}},t.prototype.componentWillReceiveProps=function(e,t){if(!e.skip||this.props.skip){var n=e.client;(!f(this.props,e)||this.client!==n&&this.client!==t.client)&&(this.client!==n&&this.client!==t.client&&(this.client=n||t.client,this.removeQuerySubscription(),this.queryObservable=null,this.previousData={},this.updateQuery(e)),this.props.query!==e.query&&this.removeQuerySubscription(),this.updateQuery(e),e.skip||this.startQuerySubscription())}else this.removeQuerySubscription()},t.prototype.componentWillUnmount=function(){this.removeQuerySubscription(),this.hasMounted=!1},t.prototype.render=function(){return(0,this.props.children)(this.getQueryResult())},t.prototype.extractOptsFromProps=function(e){var t,n=e.variables,r=e.pollInterval,o=e.fetchPolicy,a=e.errorPolicy,s=e.notifyOnNetworkStatusChange,u=e.query,c=e.displayName,l=void 0===c?"Query":c,p=e.context,f=void 0===p?{}:p;return this.operation=(0,i.parser)(u),d(this.operation.type===i.DocumentType.Query,"The <Query /> component requires a graphql query, but got a "+(this.operation.type===i.DocumentType.Mutation?"mutation":"subscription")+"."),t={variables:n,pollInterval:r,query:u,fetchPolicy:o,errorPolicy:a,notifyOnNetworkStatusChange:s,metadata:{reactComponent:{displayName:l}},context:f},Object.keys(t).reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{})},t.prototype.initializeQueryObservable=function(e){var t=this.extractOptsFromProps(e);this.context.operations&&this.context.operations.set(this.operation.name,{query:t.query,variables:t.variables}),this.queryObservable=this.client.watchQuery(t)},t.prototype.updateQuery=function(e){this.queryObservable||this.initializeQueryObservable(e),this.queryObservable.setOptions(this.extractOptsFromProps(e)).catch(function(){return null})},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.queryObservable.getLastError(),t=this.queryObservable.getLastResult();this.queryObservable.resetLastResults(),this.startQuerySubscription(),Object.assign(this.queryObservable,{lastError:e,lastResult:t})},t.contextTypes={client:o.object.isRequired,operations:o.object},t.propTypes={children:o.func.isRequired,fetchPolicy:o.string,notifyOnNetworkStatusChange:o.bool,onCompleted:o.func,onError:o.func,pollInterval:o.number,query:o.object.isRequired,variables:o.object,ssr:o.bool},t}(r.Component);t.default=b},lTCR:function(e,t,n){var r=n("DEM2").parse;function o(e){return e.replace(/[\s,]+/g," ").trim()}var a={},i={};var s=!0;var u=!1;function c(e){var t=o(e);if(a[t])return a[t];var n=r(e,{experimentalFragmentVariables:u});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=function e(t,n){var r=Object.prototype.toString.call(t);if("[object Array]"===r)return t.map(function(t){return e(t,n)});if("[object Object]"!==r)throw new Error("Unexpected input.");n&&t.loc&&delete t.loc,t.loc&&(delete t.loc.startToken,delete t.loc.endToken);var o,a,i,s=Object.keys(t);for(o in s)s.hasOwnProperty(o)&&(a=t[s[o]],"[object Object]"!==(i=Object.prototype.toString.call(a))&&"[object Array]"!==i||(t[s[o]]=e(a,!0)));return t}(n=function(e){for(var t,n={},r=[],a=0;e.definitions.length>a;a++){var u=e.definitions[a];if("FragmentDefinition"===u.kind){var c=u.name.value,l=o((t=u.loc).source.body.substring(t.start,t.end));i.hasOwnProperty(c)&&!i[c][l]?(s&&console.warn("Warning: fragment with name "+c+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),i[c][l]=!0):i.hasOwnProperty(c)||(i[c]={},i[c][l]=!0),n[l]||(n[l]=!0,r.push(u))}else r.push(u)}return e.definitions=r,e}(n),!1),a[t]=n,n}function l(){for(var e=Array.prototype.slice.call(arguments),t=e[0],n="string"==typeof t?t:t[0],r=1;e.length>r;r++)n+=e[r]&&e[r].kind&&"Document"===e[r].kind?e[r].loc.source.body:e[r],n+=t[r];return c(n)}l.default=l,l.resetCaches=function(){a={},i={}},l.disableFragmentWarnings=function(){s=!1},l.enableExperimentalFragmentVariables=function(){u=!0},l.disableExperimentalFragmentVariables=function(){u=!1},e.exports=l},zGII:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("q1tI"),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.children,n=e.createdAt;return a.default.createElement("div",{style:{backgroundColor:"rgba(220,255,255,0.8)",border:"1px solid lightgrey",borderRadius:"5px",margin:"10px 0",padding:"6px 7px 3px 11px",boxShadow:"1px 2px 2px #888888"}},a.default.createElement("div",{style:{textAlign:"start",fontWeight:"bold",color:"lightcoral"}},e.username),a.default.createElement("div",{style:{textAlign:"start",fontSize:"16px",marginTop:"2px",paddingLeft:"5px"}},t),a.default.createElement("div",{style:{textAlign:"end",fontSize:"10px",color:"grey"}},n))}},zldw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n("q1tI")),a=u(n("NtJX")),i=u(n("CnBM")),s=u(n("QLAq"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=(0,i.default)({loader:function(){return Promise.all([n.e(8),n.e(5)]).then(n.t.bind(null,"DH4Y",7))},modules:["../mdc/TextArea"],webpack:function(){return["DH4Y"]},loading:s.default}),p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;o>i;i++)a[i]=arguments[i];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={message:"",username:""},r.handleChange=function(e){r.setState({message:e.target.value})},r.clearMessage=function(){r.setState({message:""})},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.state.message,t=this.props.username;return o.default.createElement(o.default.Fragment,null,o.default.createElement(a.default,null),o.default.createElement(l,{content:e,user:t,handleChange:this.handleChange.bind(this),clearMessage:this.clearMessage.bind(this)}))}}]),t}();t.default=p}}]);
//# sourceMappingURL=2.f76eb4731086e8bed07b.js.map