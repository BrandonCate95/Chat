(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"28sT":function(e,t){!function(){var t;this.crypto&&crypto.getRandomValues&&(t=function(e){var t=new Uint8Array(e);return crypto.getRandomValues(t),t}),e.exports=t||function(e){for(var t,n=new Array(e),s=0;e>s;s++)0==(3&s)&&(t=4294967296*Math.random()),n[s]=t>>>((3&s)<<3)&255;return n}}()},8010:function(e,t,n){var s=n("S0xZ"),r=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},o=function(e,t){return e>>>t|e<<32-t},i=function(e,t){return e>>>t},a=function(e,t,n){return e&t^~e&n},u=function(e,t,n){return e&t^e&n^t&n},c=function(e){return o(e,2)^o(e,13)^o(e,22)},h=function(e){return o(e,6)^o(e,11)^o(e,25)},l=function(e){return o(e,7)^o(e,18)^i(e,3)},f=function(e,t){var n,s,f,g,p,d,S,C,m,y,v,A=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),T=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),U=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var w=0;e.length>w;w+=16){n=T[0],s=T[1],f=T[2],g=T[3],p=T[4],d=T[5],S=T[6],C=T[7];for(var I=0;64>I;I++)U[I]=16>I?e[I+w]:r(r(r(o(v=U[I-2],17)^o(v,19)^i(v,10),U[I-7]),l(U[I-15])),U[I-16]),m=r(r(r(r(C,h(p)),a(p,d,S)),A[I]),U[I]),y=r(c(n),u(n,s,f)),C=S,S=d,d=p,p=r(g,m),g=f,f=s,s=n,n=r(m,y);T[0]=r(n,T[0]),T[1]=r(s,T[1]),T[2]=r(f,T[2]),T[3]=r(g,T[3]),T[4]=r(p,T[4]),T[5]=r(d,T[5]),T[6]=r(S,T[6]),T[7]=r(C,T[7])}return T};e.exports=function(e){return s.hash(e,f,32,!0)}},CnK9:function(e,t,n){var s=n("S0xZ");function r(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,s=-271733879,r=-1732584194,o=271733878,l=0;e.length>l;l+=16){var f=n,g=s,p=r,d=o;s=c(s=c(s=c(s=c(s=u(s=u(s=u(s=u(s=a(s=a(s=a(s=a(s=i(s=i(s=i(s=i(s,r=i(r,o=i(o,n=i(n,s,r,o,e[l+0],7,-680876936),s,r,e[l+1],12,-389564586),n,s,e[l+2],17,606105819),o,n,e[l+3],22,-1044525330),r=i(r,o=i(o,n=i(n,s,r,o,e[l+4],7,-176418897),s,r,e[l+5],12,1200080426),n,s,e[l+6],17,-1473231341),o,n,e[l+7],22,-45705983),r=i(r,o=i(o,n=i(n,s,r,o,e[l+8],7,1770035416),s,r,e[l+9],12,-1958414417),n,s,e[l+10],17,-42063),o,n,e[l+11],22,-1990404162),r=i(r,o=i(o,n=i(n,s,r,o,e[l+12],7,1804603682),s,r,e[l+13],12,-40341101),n,s,e[l+14],17,-1502002290),o,n,e[l+15],22,1236535329),r=a(r,o=a(o,n=a(n,s,r,o,e[l+1],5,-165796510),s,r,e[l+6],9,-1069501632),n,s,e[l+11],14,643717713),o,n,e[l+0],20,-373897302),r=a(r,o=a(o,n=a(n,s,r,o,e[l+5],5,-701558691),s,r,e[l+10],9,38016083),n,s,e[l+15],14,-660478335),o,n,e[l+4],20,-405537848),r=a(r,o=a(o,n=a(n,s,r,o,e[l+9],5,568446438),s,r,e[l+14],9,-1019803690),n,s,e[l+3],14,-187363961),o,n,e[l+8],20,1163531501),r=a(r,o=a(o,n=a(n,s,r,o,e[l+13],5,-1444681467),s,r,e[l+2],9,-51403784),n,s,e[l+7],14,1735328473),o,n,e[l+12],20,-1926607734),r=u(r,o=u(o,n=u(n,s,r,o,e[l+5],4,-378558),s,r,e[l+8],11,-2022574463),n,s,e[l+11],16,1839030562),o,n,e[l+14],23,-35309556),r=u(r,o=u(o,n=u(n,s,r,o,e[l+1],4,-1530992060),s,r,e[l+4],11,1272893353),n,s,e[l+7],16,-155497632),o,n,e[l+10],23,-1094730640),r=u(r,o=u(o,n=u(n,s,r,o,e[l+13],4,681279174),s,r,e[l+0],11,-358537222),n,s,e[l+3],16,-722521979),o,n,e[l+6],23,76029189),r=u(r,o=u(o,n=u(n,s,r,o,e[l+9],4,-640364487),s,r,e[l+12],11,-421815835),n,s,e[l+15],16,530742520),o,n,e[l+2],23,-995338651),r=c(r,o=c(o,n=c(n,s,r,o,e[l+0],6,-198630844),s,r,e[l+7],10,1126891415),n,s,e[l+14],15,-1416354905),o,n,e[l+5],21,-57434055),r=c(r,o=c(o,n=c(n,s,r,o,e[l+12],6,1700485571),s,r,e[l+3],10,-1894986606),n,s,e[l+10],15,-1051523),o,n,e[l+1],21,-2054922799),r=c(r,o=c(o,n=c(n,s,r,o,e[l+8],6,1873313359),s,r,e[l+15],10,-30611744),n,s,e[l+6],15,-1560198380),o,n,e[l+13],21,1309151649),r=c(r,o=c(o,n=c(n,s,r,o,e[l+4],6,-145523070),s,r,e[l+11],10,-1120210379),n,s,e[l+2],15,718787259),o,n,e[l+9],21,-343485551),n=h(n,f),s=h(s,g),r=h(r,p),o=h(o,d)}return Array(n,s,r,o)}function o(e,t,n,s,r,o){return h((i=h(h(t,e),h(s,o)))<<(a=r)|i>>>32-a,n);var i,a}function i(e,t,n,s,r,i,a){return o(t&n|~t&s,e,t,r,i,a)}function a(e,t,n,s,r,i,a){return o(t&s|n&~s,e,t,r,i,a)}function u(e,t,n,s,r,i,a){return o(t^n^s,e,t,r,i,a)}function c(e,t,n,s,r,i,a){return o(n^(t|~s),e,t,r,i,a)}function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}e.exports=function(e){return s.hash(e,r,16)}},ColZ:function(e,t,n){"use strict";n.r(t);var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jwtToken=t||"",this.payload=this.decodePayload()}return e.prototype.getJwtToken=function(){return this.jwtToken},e.prototype.setJwtToken=function(e){this.jwtToken=e},e.prototype.getExpiration=function(){if(null!==this.jwtToken){var e=this.jwtToken.split(".")[1];return JSON.parse(atob(e)).exp}},e.prototype.getUsername=function(){if(null!==this.jwtToken){var e=this.jwtToken.split(".")[1];return JSON.parse(atob(e)).username}},e.prototype.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(atob(e))}catch(e){return{}}},e}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jwtToken=t||"",this.payload=this.decodePayload()}return e.prototype.getJwtToken=function(){return this.jwtToken},e.prototype.setJwtToken=function(e){this.jwtToken=e},e.prototype.getExpiration=function(){if(null!==this.jwtToken){var e=this.jwtToken.split(".")[1];return JSON.parse(atob(e)).exp}},e.prototype.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(atob(e))}catch(e){return{}}},e}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refreshToken=t||""}return e.prototype.getToken=function(){return this.refreshToken},e.prototype.setToken=function(e){this.refreshToken=e},e}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokenScopes=t||[]}return e.prototype.getScopes=function(){return this.tokenScopes},e.prototype.setTokenScopes=function(e){this.tokenScopes=e},e}();var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.IdToken,a=t.RefreshToken,u=t.AccessToken,c=t.TokenScopes,h=t.State;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.idToken=n||new r,this.refreshToken=a||new o,this.accessToken=u||new s,this.tokenScopes=c||new i,this.state=h||null}return e.prototype.getIdToken=function(){return this.idToken},e.prototype.setIdToken=function(e){this.idToken=e},e.prototype.getRefreshToken=function(){return this.refreshToken},e.prototype.setRefreshToken=function(e){this.refreshToken=e},e.prototype.getAccessToken=function(){return this.accessToken},e.prototype.setAccessToken=function(e){this.accessToken=e},e.prototype.getTokenScopes=function(){return this.tokenScopes},e.prototype.setTokenScopes=function(e){this.tokenScopes=e},e.prototype.getState=function(){return this.state},e.prototype.setState=function(e){this.state=e},e.prototype.isValid=function(){var e=Math.floor(new Date/1e3);try{return null!=this.accessToken?e<this.accessToken.getExpiration():null!=this.idToken&&e<this.idToken.getExpiration()}catch(e){return!1}},e}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c={},h=function(){function e(){u(this,e)}return e.setItem=function(e,t){return c[e]=t,c[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(c,e)?c[e]:void 0},e.removeItem=function(e){return delete c[e]},e.clear=function(){return c={}},e}(),l=function(){function e(){u(this,e);try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=h}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},s=n.ClientId,r=n.AppWebDomain,o=n.TokenScopesArray,a=n.RedirectUriSignIn,u=n.RedirectUriSignOut,c=n.IdentityProvider,h=n.UserPoolId,f=n.AdvancedSecurityDataCollectionFlag,g=n.Storage;if(!(null!=t&&s&&r&&a&&u))throw new Error(this.getCognitoConstants().PARAMETERERROR);if(this.clientId=s,this.appWebDomain=r,this.TokenScopesArray=o||[],!Array.isArray(o))throw new Error(this.getCognitoConstants().SCOPETYPEERROR);var p=new i(this.TokenScopesArray);this.RedirectUriSignIn=a,this.RedirectUriSignOut=u,this.IdentityProvider=c,this.responseType=this.getCognitoConstants().TOKEN,this.storage=g||(new l).getStorage(),this.username=this.getLastUser(),this.userPoolId=h,this.signInUserSession=this.getCachedSession(),this.signInUserSession.setTokenScopes(p),this.advancedSecurityDataCollectionFlag=!0,f&&(this.advancedSecurityDataCollectionFlag=f)}return e.prototype.getCognitoConstants=function(){return{DOMAIN_SCHEME:"https",DOMAIN_PATH_SIGNIN:"oauth2/authorize",DOMAIN_PATH_TOKEN:"oauth2/token",DOMAIN_PATH_SIGNOUT:"logout",DOMAIN_QUERY_PARAM_REDIRECT_URI:"redirect_uri",DOMAIN_QUERY_PARAM_SIGNOUT_URI:"logout_uri",DOMAIN_QUERY_PARAM_RESPONSE_TYPE:"response_type",DOMAIN_QUERY_PARAM_IDENTITY_PROVIDER:"identity_provider",DOMAIN_QUERY_PARAM_USERCONTEXTDATA:"userContextData",CLIENT_ID:"client_id",STATE:"state",SCOPE:"scope",TOKEN:"token",CODE:"code",POST:"POST",PARAMETERERROR:"The parameters: App client Id, App web domain, the redirect URL when you are signed in and the redirect URL when you are signed out are required.",SCOPETYPEERROR:"Scopes have to be array type. ",QUESTIONMARK:"?",POUNDSIGN:"#",COLONDOUBLESLASH:"://",SLASH:"/",AMPERSAND:"&",EQUALSIGN:"=",SPACE:" ",CONTENTTYPE:"Content-Type",CONTENTTYPEVALUE:"application/x-www-form-urlencoded",AUTHORIZATIONCODE:"authorization_code",IDTOKEN:"id_token",ACCESSTOKEN:"access_token",REFRESHTOKEN:"refresh_token",ERROR:"error",ERROR_DESCRIPTION:"error_description",STRINGTYPE:"string",STATELENGTH:32,STATEORIGINSTRING:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",WITHCREDENTIALS:"withCredentials",UNDEFINED:"undefined",SELF:"_self",HOSTNAMEREGEX:/:\/\/([0-9]?\.)?(.[^/:]+)/i,QUERYPARAMETERREGEX1:/#(.+)/,QUERYPARAMETERREGEX2:/=(.+)/,HEADER:{"Content-Type":"application/x-www-form-urlencoded"}}},e.prototype.getClientId=function(){return this.clientId},e.prototype.getAppWebDomain=function(){return this.appWebDomain},e.prototype.getCurrentUser=function(){return this.storage.getItem("CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser")},e.prototype.setUser=function(e){this.username=e},e.prototype.useCodeGrantFlow=function(){this.responseType=this.getCognitoConstants().CODE},e.prototype.useImplicitFlow=function(){this.responseType=this.getCognitoConstants().TOKEN},e.prototype.getSignInUserSession=function(){return this.signInUserSession},e.prototype.getUsername=function(){return this.username},e.prototype.setUsername=function(e){this.username=e},e.prototype.getState=function(){return this.state},e.prototype.setState=function(e){this.state=e},e.prototype.getSession=function(){var e=new Set(this.TokenScopesArray),t=new Set(this.signInUserSession.tokenScopes.getScopes()),n=this.getFQDNSignIn();if(null!=this.signInUserSession&&this.signInUserSession.isValid())return this.userhandler.onSuccess(this.signInUserSession);if(this.signInUserSession=this.getCachedSession(),this.compareSets(e,t)){if(this.signInUserSession.isValid())return this.userhandler.onSuccess(this.signInUserSession);this.signInUserSession.getRefreshToken()&&this.signInUserSession.getRefreshToken().getToken()?this.refreshSession(this.signInUserSession.getRefreshToken().getToken()):this.launchUri(n)}else{var a=new i(this.TokenScopesArray),u=new r,c=new s,h=new o;this.signInUserSession.setTokenScopes(a),this.signInUserSession.setIdToken(u),this.signInUserSession.setAccessToken(c),this.signInUserSession.setRefreshToken(h),this.launchUri(n)}},e.prototype.parseCognitoWebResponse=function(e){var t=void 0;if(e.indexOf(this.getCognitoConstants().QUESTIONMARK)>-1){var n=e.split(this.getCognitoConstants().POUNDSIGN)[0];t=this.getQueryParameters(n,this.getCognitoConstants().QUESTIONMARK),this.getCodeQueryParameter(t)}else if(e.indexOf(this.getCognitoConstants().POUNDSIGN)>-1){if((t=this.getQueryParameters(e,this.getCognitoConstants().QUERYPARAMETERREGEX1)).has(this.getCognitoConstants().ERROR))return this.userhandler.onFailure(t.get(this.getCognitoConstants().ERROR_DESCRIPTION));this.getTokenQueryParameter(t)}},e.prototype.getCodeQueryParameter=function(e){if(e.has(this.getCognitoConstants().STATE)?this.signInUserSession.setState(e.get(this.getCognitoConstants().STATE)):this.signInUserSession.setState(null),e.has(this.getCognitoConstants().CODE)){var t=e.get(this.getCognitoConstants().CODE),n=this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_TOKEN),s=this.getCognitoConstants().HEADER,r={grant_type:this.getCognitoConstants().AUTHORIZATIONCODE,client_id:this.getClientId(),redirect_uri:this.RedirectUriSignIn,code:t},o=this.onSuccessExchangeForToken.bind(this),i=this.onFailure.bind(this);this.makePOSTRequest(s,r,n,o,i)}},e.prototype.getTokenQueryParameter=function(e){var t=new r,n=new s;new o;e.has(this.getCognitoConstants().IDTOKEN)?(t.setJwtToken(e.get(this.getCognitoConstants().IDTOKEN)),this.signInUserSession.setIdToken(t)):this.signInUserSession.setIdToken(t),e.has(this.getCognitoConstants().ACCESSTOKEN)?(n.setJwtToken(e.get(this.getCognitoConstants().ACCESSTOKEN)),this.signInUserSession.setAccessToken(n)):this.signInUserSession.setAccessToken(n),e.has(this.getCognitoConstants().STATE)?this.signInUserSession.setState(e.get(this.getCognitoConstants().STATE)):this.signInUserSession.setState(null),this.cacheTokensScopes(),this.userhandler.onSuccess(this.signInUserSession)},e.prototype.getCachedSession=function(){if(!this.username)return new a;var e="CognitoIdentityServiceProvider."+this.getClientId()+"."+this.username,t=e+".idToken",n=e+".accessToken",u=e+".refreshToken",c=this.storage.getItem(e+".tokenScopesString"),h=[];c&&(h=c.split(" "));var l=new i(h),f=new r(this.storage.getItem(t)),g=new s(this.storage.getItem(n)),p=new o(this.storage.getItem(u));return new a({IdToken:f,AccessToken:g,RefreshToken:p,TokenScopes:l})},e.prototype.getLastUser=function(){var e="CognitoIdentityServiceProvider."+this.getClientId(),t=this.storage.getItem(e+".LastAuthUser");if(t)return t},e.prototype.cacheTokensScopes=function(){var e="CognitoIdentityServiceProvider."+this.getClientId(),t=this.signInUserSession.getAccessToken().getUsername();this.username=t;var n=e+"."+t+".idToken",s=e+"."+t+".accessToken",r=e+"."+t+".refreshToken",o=e+".LastAuthUser",i=e+"."+t+".tokenScopesString",a=this.signInUserSession.getTokenScopes().getScopes().join(" ");this.storage.setItem(n,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(o,t),this.storage.setItem(i,a)},e.prototype.compareSets=function(e,t){if(e.size!==t.size)return!1;var n=e,s=Array.isArray(n),r=0;for(n=s?n:n[Symbol.iterator]();;){var o;if(s){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}if(!t.has(o))return!1}return!0},e.prototype.getHostName=function(e){var t=e.match(this.getCognitoConstants().HOSTNAMEREGEX);if(null!=t&&t.length>2&&f(t[2])===this.getCognitoConstants().STRINGTYPE&&t[2].length>0)return t[2]},e.prototype.getQueryParameters=function(e,t){var n=String(e).split(t),s=String(n[1]).split(this.getCognitoConstants().AMPERSAND),r=s.length,o=new Map,i=void 0;for(i=0;r>i;i++)s[i]=String(s[i]).split(this.getCognitoConstants().QUERYPARAMETERREGEX2),o.set(s[i][0],s[i][1]);return o},e.prototype.generateRandomString=function(e,t){for(var n="",s=e;s>0;--s)n+=t[Math.round(Math.random()*(t.length-1))];return n},e.prototype.clearCachedTokensScopes=function(){var e="CognitoIdentityServiceProvider."+this.getClientId(),t=e+"."+this.username+".accessToken",n=e+"."+this.username+".refreshToken",s=e+".LastAuthUser",r=e+"."+this.username+".tokenScopesString";this.storage.removeItem(e+"."+this.username+".idToken"),this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(s),this.storage.removeItem(r)},e.prototype.refreshSession=function(e){var t=this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_TOKEN),n=this.getCognitoConstants().HEADER,s={grant_type:this.getCognitoConstants().REFRESHTOKEN,client_id:this.getClientId(),redirect_uri:this.RedirectUriSignIn,refresh_token:e},r=this.onSuccessRefreshToken.bind(this),o=this.onFailure.bind(this);this.makePOSTRequest(n,s,t,r,o)},e.prototype.makePOSTRequest=function(e,t,n,s,r){var o=this.createCORSRequest(this.getCognitoConstants().POST,n),i="";if(o){for(var a in e)o.setRequestHeader(a,e[a]);for(var u in t)i=i.concat(u,this.getCognitoConstants().EQUALSIGN,t[u],this.getCognitoConstants().AMPERSAND);i=i.substring(0,i.length-1),o.send(i),o.onreadystatechange=function(){4===o.readyState&&(200===o.status?s(o.responseText):r(o.responseText))}}},e.prototype.createCORSRequest=function(e,t){var n=new XMLHttpRequest;return n.open(e,t,!0),this.getCognitoConstants().WITHCREDENTIALS in n?n.open(e,t,!0):("undefined"==typeof XDomainRequest?"undefined":f(XDomainRequest))!==this.getCognitoConstants().UNDEFINED?(n=new XDomainRequest).open(e,t):n=null,n},e.prototype.onFailure=function(e){this.userhandler.onFailure(e)},e.prototype.onSuccessRefreshToken=function(e){var t=JSON.parse(e);if(Object.prototype.hasOwnProperty.call(t,this.getCognitoConstants().ERROR)){var n=this.getFQDNSignIn();this.launchUri(n)}else Object.prototype.hasOwnProperty.call(t,this.getCognitoConstants().IDTOKEN)&&this.signInUserSession.setIdToken(new r(t.id_token)),Object.prototype.hasOwnProperty.call(t,this.getCognitoConstants().ACCESSTOKEN)&&this.signInUserSession.setAccessToken(new s(t.access_token)),this.cacheTokensScopes(),this.userhandler.onSuccess(this.signInUserSession)},e.prototype.onSuccessExchangeForToken=function(e){var t=JSON.parse(e),n=new o,i=new s,a=new r;if(Object.prototype.hasOwnProperty.call(t,this.getCognitoConstants().ERROR))return this.userhandler.onFailure(e);Object.prototype.hasOwnProperty.call(t,this.getCognitoConstants().IDTOKEN)?this.signInUserSession.setIdToken(new r(t.id_token)):this.signInUserSession.setIdToken(a),Object.prototype.hasOwnProperty.call(t,this.getCognitoConstants().ACCESSTOKEN)?this.signInUserSession.setAccessToken(new s(t.access_token)):this.signInUserSession.setAccessToken(i),Object.prototype.hasOwnProperty.call(t,this.getCognitoConstants().REFRESHTOKEN)?this.signInUserSession.setRefreshToken(new o(t.refresh_token)):this.signInUserSession.setRefreshToken(n),this.cacheTokensScopes(),this.userhandler.onSuccess(this.signInUserSession)},e.prototype.launchUri=function(e){window.open(e,this.getCognitoConstants().SELF)},e.prototype.getSpaceSeperatedScopeString=function(){var e=this.signInUserSession.getTokenScopes().getScopes();return e=e.join(this.getCognitoConstants().SPACE),encodeURIComponent(e)},e.prototype.getFQDNSignIn=function(){null==this.state&&(this.state=this.generateRandomString(this.getCognitoConstants().STATELENGTH,this.getCognitoConstants().STATEORIGINSTRING));var e=this.IdentityProvider?this.getCognitoConstants().AMPERSAND.concat(this.getCognitoConstants().DOMAIN_QUERY_PARAM_IDENTITY_PROVIDER,this.getCognitoConstants().EQUALSIGN,this.IdentityProvider):"",t=this.getSpaceSeperatedScopeString(),n="";return this.getUserContextData()&&(n=this.getCognitoConstants().AMPERSAND+this.getCognitoConstants().DOMAIN_QUERY_PARAM_USERCONTEXTDATA+this.getCognitoConstants().EQUALSIGN+this.getUserContextData()),this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_SIGNIN,this.getCognitoConstants().QUESTIONMARK,this.getCognitoConstants().DOMAIN_QUERY_PARAM_REDIRECT_URI,this.getCognitoConstants().EQUALSIGN,encodeURIComponent(this.RedirectUriSignIn),this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().DOMAIN_QUERY_PARAM_RESPONSE_TYPE,this.getCognitoConstants().EQUALSIGN,this.responseType,this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().CLIENT_ID,this.getCognitoConstants().EQUALSIGN,this.getClientId(),this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().STATE,this.getCognitoConstants().EQUALSIGN,this.state,this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().SCOPE,this.getCognitoConstants().EQUALSIGN,t,e,n)},e.prototype.signOut=function(){var e=this.getFQDNSignOut();this.signInUserSession=null,this.clearCachedTokensScopes(),this.launchUri(e)},e.prototype.getFQDNSignOut=function(){return this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_SIGNOUT,this.getCognitoConstants().QUESTIONMARK,this.getCognitoConstants().DOMAIN_QUERY_PARAM_SIGNOUT_URI,this.getCognitoConstants().EQUALSIGN,encodeURIComponent(this.RedirectUriSignOut),this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().CLIENT_ID,this.getCognitoConstants().EQUALSIGN,this.getClientId())},e.prototype.getUserContextData=function(){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var e="";this.username&&(e=this.username);var t="";return this.userpoolId&&(t=this.userpoolId),this.advancedSecurityDataCollectionFlag?AmazonCognitoAdvancedSecurityData.getData(e,t,this.clientId):void 0}},e.prototype.isUserSignedIn=function(){return null!=this.signInUserSession&&this.signInUserSession.isValid()||null!=this.getCachedSession()&&this.getCachedSession().isValid()},e}();var p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getNowString=function(){var e=new Date,t=d[e.getUTCDay()],n=p[e.getUTCMonth()],s=e.getUTCDate(),r=e.getUTCHours();10>r&&(r="0"+r);var o=e.getUTCMinutes();10>o&&(o="0"+o);var i=e.getUTCSeconds();return 10>i&&(i="0"+i),t+" "+n+" "+s+" "+r+":"+o+":"+i+" UTC "+e.getUTCFullYear()},e}();n.d(t,"CognitoAccessToken",function(){return s}),n.d(t,"CognitoIdToken",function(){return r}),n.d(t,"CognitoRefreshToken",function(){return o}),n.d(t,"CognitoTokenScopes",function(){return i}),n.d(t,"CognitoAuth",function(){return g}),n.d(t,"CognitoAuthSession",function(){return a}),n.d(t,"DateHelper",function(){return S}),n.d(t,"StorageHelper",function(){return l})},S0xZ:function(e,t,n){var s=n("tjlA").Buffer,r=4,o=new s(r);o.fill(0);var i=8;e.exports={hash:function(e,t,n,a){return s.isBuffer(e)||(e=new s(e)),function(e,t,n){for(var r=new s(t),o=n?r.writeInt32BE:r.writeInt32LE,i=0;e.length>i;i++)o.call(r,e[i],4*i,!0);return r}(t(function(e,t){e.length%r!=0&&(e=s.concat([e,o],e.length+(r-e.length%r)));for(var n=[],i=t?e.readInt32BE:e.readInt32LE,a=0;e.length>a;a+=r)n.push(i.call(e,a));return n}(e,a),e.length*i),n,a)}}},TESy:function(e,t,n){"use strict";n.r(t);var s,r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},s=n.Username,r=n.Password,o=n.AuthParameters;this.validationData=n.ValidationData||{},this.authParameters=o||{},this.username=s,this.password=r}return e.prototype.getUsername=function(){return this.username},e.prototype.getPassword=function(){return this.password},e.prototype.getValidationData=function(){return this.validationData},e.prototype.getAuthParameters=function(){return this.authParameters},e}(),o=n("tjlA"),i=n("aAgK"),a=u;function u(e,t){null!=e&&this.fromString(e,t)}function c(){return new u(null)}var h="undefined"!=typeof navigator;h&&"Microsoft Internet Explorer"==navigator.appName?(u.prototype.am=function(e,t,n,s,r,o){for(var i=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,h=a*u+c*i;r=((u=i*u+((32767&h)<<15)+n[s]+(1073741823&r))>>>30)+(h>>>15)+a*c+(r>>>30),n[s++]=1073741823&u}return r},s=30):h&&"Netscape"!=navigator.appName?(u.prototype.am=function(e,t,n,s,r,o){for(;--o>=0;){var i=t*this[e++]+n[s]+r;r=Math.floor(i/67108864),n[s++]=67108863&i}return r},s=26):(u.prototype.am=function(e,t,n,s,r,o){for(var i=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,h=a*u+c*i;r=((u=i*u+((16383&h)<<14)+n[s]+r)>>28)+(h>>14)+a*c,n[s++]=268435455&u}return r},s=28),u.prototype.DB=s,u.prototype.DM=(1<<s)-1,u.prototype.DV=1<<s;u.prototype.FV=Math.pow(2,52),u.prototype.F1=52-s,u.prototype.F2=2*s-52;var l,f,g="0123456789abcdefghijklmnopqrstuvwxyz",p=new Array;for(l="0".charCodeAt(0),f=0;9>=f;++f)p[l++]=f;for(l="a".charCodeAt(0),f=10;36>f;++f)p[l++]=f;for(l="A".charCodeAt(0),f=10;36>f;++f)p[l++]=f;function d(e){return g.charAt(e)}function S(e,t){var n=p[e.charCodeAt(t)];return null==n?-1:n}function C(e){var t=c();return t.fromInt(e),t}function m(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}y.prototype.convert=function(e){var t=c();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),0>e.s&&t.compareTo(u.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=c();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;this.mt2>=e.t;)e[e.t++]=0;for(var t=0;this.m.t>t;++t){var n=32767&e[t],s=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,s,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0>e.compareTo(this.m)||e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},u.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},u.prototype.fromInt=function(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+this.DV:this.t=0},u.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var s=e.length,r=!1,o=0;--s>=0;){var i=S(e,s);0>i?"-"==e.charAt(s)&&(r=!0):(r=!1,0==o?this[this.t++]=i:o+n>this.DB?(this[this.t-1]|=(i&(1<<this.DB-o)-1)<<o,this[this.t++]=i>>this.DB-o):this[this.t-1]|=i<<o,this.DB>(o+=n)||(o-=this.DB))}this.clamp(),r&&u.ZERO.subTo(this,this)},u.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},u.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},u.prototype.drShiftTo=function(e,t){for(var n=e;this.t>n;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},u.prototype.lShiftTo=function(e,t){var n,s=e%this.DB,r=this.DB-s,o=(1<<r)-1,i=Math.floor(e/this.DB),a=this.s<<s&this.DM;for(n=this.t-1;n>=0;--n)t[n+i+1]=this[n]>>r|a,a=(this[n]&o)<<s;for(n=i-1;n>=0;--n)t[n]=0;t[i]=a,t.t=this.t+i+1,t.s=this.s,t.clamp()},u.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(this.t>n){var s=e%this.DB,r=this.DB-s,o=(1<<s)-1;t[0]=this[n]>>s;for(var i=n+1;this.t>i;++i)t[i-n-1]|=(this[i]&o)<<r,t[i-n]=this[i]>>s;s>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}else t.t=0},u.prototype.subTo=function(e,t){for(var n=0,s=0,r=Math.min(e.t,this.t);r>n;)s+=this[n]-e[n],t[n++]=s&this.DM,s>>=this.DB;if(this.t>e.t){for(s-=e.s;this.t>n;)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;e.t>n;)s-=e[n],t[n++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=0>s?-1:0,-1>s?t[n++]=this.DV+s:s>0&&(t[n++]=s),t.t=n,t.clamp()},u.prototype.multiplyTo=function(e,t){var n=this.abs(),s=e.abs(),r=n.t;for(t.t=r+s.t;--r>=0;)t[r]=0;for(r=0;s.t>r;++r)t[r+n.t]=n.am(0,s[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&u.ZERO.subTo(t,t)},u.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;t.t-1>n;++n){var s=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,s,t.t-n-1))<t.DV||(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},u.prototype.divRemTo=function(e,t,n){var s=e.abs();if(s.t>0){var r=this.abs();if(s.t>r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=c());var o=c(),i=this.s,a=e.s,h=this.DB-m(s[s.t-1]);h>0?(s.lShiftTo(h,o),r.lShiftTo(h,n)):(s.copyTo(o),r.copyTo(n));var l=o.t,f=o[l-1];if(0!=f){var g=f*(1<<this.F1)+(l>1?o[l-2]>>this.F2:0),p=this.FV/g,d=(1<<this.F1)/g,S=1<<this.F2,C=n.t,y=C-l,v=null==t?c():t;for(o.dlShiftTo(y,v),0>n.compareTo(v)||(n[n.t++]=1,n.subTo(v,n)),u.ONE.dlShiftTo(l,v),v.subTo(o,o);l>o.t;)o[o.t++]=0;for(;--y>=0;){var A=n[--C]==f?this.DM:Math.floor(n[C]*p+(n[C-1]+S)*d);if((n[C]+=o.am(0,A,n,y,0,l))<A)for(o.dlShiftTo(y,v),n.subTo(v,n);n[C]<--A;)n.subTo(v,n)}null!=t&&(n.drShiftTo(l,t),i!=a&&u.ZERO.subTo(t,t)),n.t=l,n.clamp(),h>0&&n.rShiftTo(h,n),0>i&&u.ZERO.subTo(n,n)}}},u.prototype.invDigit=function(){if(1>this.t)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},u.prototype.addTo=function(e,t){for(var n=0,s=0,r=Math.min(e.t,this.t);r>n;)s+=this[n]+e[n],t[n++]=s&this.DM,s>>=this.DB;if(this.t>e.t){for(s+=e.s;this.t>n;)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;e.t>n;)s+=e[n],t[n++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=0>s?-1:0,s>0?t[n++]=s:-1>s&&(t[n++]=this.DV+s),t.t=n,t.clamp()},u.prototype.toString=function(e){if(0>this.s)return"-"+this.negate().toString();var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,s=(1<<t)-1,r=!1,o="",i=this.t,a=this.DB-i*this.DB%t;if(i-- >0)for(this.DB>a&&(n=this[i]>>a)>0&&(r=!0,o=d(n));i>=0;)t>a?(n=(this[i]&(1<<a)-1)<<t-a,n|=this[--i]>>(a+=this.DB-t)):(n=this[i]>>(a-=t)&s,a>0||(a+=this.DB,--i)),n>0&&(r=!0),r&&(o+=d(n));return r?o:"0"},u.prototype.negate=function(){var e=c();return u.ZERO.subTo(this,e),e},u.prototype.abs=function(){return 0>this.s?this.negate():this},u.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return 0>this.s?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},u.prototype.bitLength=function(){return this.t>0?this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM):0},u.prototype.mod=function(e){var t=c();return this.abs().divRemTo(e,null,t),0>this.s&&t.compareTo(u.ZERO)>0&&e.subTo(t,t),t},u.prototype.equals=function(e){return 0==this.compareTo(e)},u.prototype.add=function(e){var t=c();return this.addTo(e,t),t},u.prototype.subtract=function(e){var t=c();return this.subTo(e,t),t},u.prototype.multiply=function(e){var t=c();return this.multiplyTo(e,t),t},u.prototype.divide=function(e){var t=c();return this.divRemTo(e,t,null),t},u.prototype.modPow=function(e,t,n){var s,r=e.bitLength(),o=C(1),i=new y(t);if(0>=r)return o;s=18>r?1:48>r?3:144>r?4:768>r?5:6;var a=new Array,u=3,h=s-1,l=(1<<s)-1;if(a[1]=i.convert(this),s>1){var f=c();for(i.sqrTo(a[1],f);l>=u;)a[u]=c(),i.mulTo(f,a[u-2],a[u]),u+=2}var g,p,d=e.t-1,S=!0,v=c();for(r=m(e[d])-1;d>=0;){for(h>r?(g=(e[d]&(1<<r+1)-1)<<h-r,d>0&&(g|=e[d-1]>>this.DB+r-h)):g=e[d]>>r-h&l,u=s;0==(1&g);)g>>=1,--u;if(0>(r-=u)&&(r+=this.DB,--d),S)a[g].copyTo(o),S=!1;else{for(;u>1;)i.sqrTo(o,v),i.sqrTo(v,o),u-=2;u>0?i.sqrTo(o,v):(p=o,o=v,v=p),i.mulTo(v,a[g],o)}for(;d>=0&&0==(e[d]&1<<r);)i.sqrTo(o,v),p=o,o=v,v=p,0>--r&&(r=this.DB-1,--d)}var A=i.revert(o);return n(null,A),A},u.ZERO=C(0),u.ONE=C(1);var v=i.createHash,A=i.createHmac,T=i.randomBytes,U="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.N=new a(U,16),this.g=new a("2",16),this.k=new a(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=o.Buffer.from("Caldera Derived Key","utf8"),this.poolName=t}return e.prototype.getSmallAValue=function(){return this.smallAValue},e.prototype.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(n,s){n&&e(n,null),t.largeAValue=s,e(null,t.largeAValue)})},e.prototype.generateRandomSmallA=function(){var e=T(128).toString("hex");return new a(e,16).mod(this.N)},e.prototype.generateRandomString=function(){return T(40).toString("base64")},e.prototype.getRandomPassword=function(){return this.randomPassword},e.prototype.getSaltDevices=function(){return this.SaltToHashDevices},e.prototype.getVerifierDevices=function(){return this.verifierDevices},e.prototype.generateHashDevice=function(e,t,n){var s=this;this.randomPassword=this.generateRandomString();var r=this.hash(""+e+t+":"+this.randomPassword),o=T(16).toString("hex");this.SaltToHashDevices=this.padHex(new a(o,16)),this.g.modPow(new a(this.hexHash(this.SaltToHashDevices+r),16),this.N,function(e,t){e&&n(e,null),s.verifierDevices=s.padHex(t),n(null,null)})},e.prototype.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,function(e,s){e&&t(e,null),s.mod(n.N).equals(a.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,s)})},e.prototype.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new a(this.UHexHash,16)},e.prototype.hash=function(e){var t=v("sha256").update(e).digest("hex");return new Array(64-t.length).join("0")+t},e.prototype.hexHash=function(e){return this.hash(o.Buffer.from(e,"hex"))},e.prototype.computehkdf=function(e,t){var n=A("sha256",t).update(e).digest(),s=o.Buffer.concat([this.infoBits,o.Buffer.from(String.fromCharCode(1),"utf8")]);return A("sha256",n).update(s).digest().slice(0,16)},e.prototype.getPasswordAuthenticationKey=function(e,t,n,s,r){var i=this;if(n.mod(this.N).equals(a.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(a.ZERO))throw new Error("U cannot be zero.");var u=this.hash(""+this.poolName+e+":"+t),c=new a(this.hexHash(this.padHex(s)+u),16);this.calculateS(c,n,function(e,t){e&&r(e,null);var n=i.computehkdf(o.Buffer.from(i.padHex(t),"hex"),o.Buffer.from(i.padHex(i.UValue.toString(16)),"hex"));r(null,n)})},e.prototype.calculateS=function(e,t,n){var s=this;this.g.modPow(e,this.N,function(r,o){r&&n(r,null),t.subtract(s.k.multiply(o)).modPow(s.smallAValue.add(s.UValue.multiply(e)),s.N,function(e,t){e&&n(e,null),n(null,t.mod(s.N))})})},e.prototype.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},e.prototype.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},e}();var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jwtToken=t||"",this.payload=this.decodePayload()}return e.prototype.getJwtToken=function(){return this.jwtToken},e.prototype.getExpiration=function(){return this.payload.exp},e.prototype.getIssuedAt=function(){return this.payload.iat},e.prototype.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(o.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();var E=function(e){function t(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).AccessToken;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n||""))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(I);var D=function(e){function t(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).IdToken;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n||""))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(I);var P=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).RefreshToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.token=t||""}return e.prototype.getToken=function(){return this.token},e}();var b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.IdToken,s=t.RefreshToken,r=t.AccessToken,o=t.ClockDrift;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==r||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=s,this.accessToken=r,this.clockDrift=void 0===o?this.calculateClockDrift():o}return e.prototype.getIdToken=function(){return this.idToken},e.prototype.getRefreshToken=function(){return this.refreshToken},e.prototype.getAccessToken=function(){return this.accessToken},e.prototype.getClockDrift=function(){return this.clockDrift},e.prototype.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},e.prototype.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}();var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],R=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getNowString=function(){var e=new Date,t=R[e.getUTCDay()],n=k[e.getUTCMonth()],s=e.getUTCDate(),r=e.getUTCHours();10>r&&(r="0"+r);var o=e.getUTCMinutes();10>o&&(o="0"+o);var i=e.getUTCSeconds();return 10>i&&(i="0"+i),t+" "+n+" "+s+" "+r+":"+o+":"+i+" UTC "+e.getUTCFullYear()},e}();var O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.Name,s=t.Value;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Name=n||"",this.Value=s||""}return e.prototype.getValue=function(){return this.Value},e.prototype.setValue=function(e){return this.Value=e,this},e.prototype.getName=function(){return this.Name},e.prototype.setName=function(e){return this.Name=e,this},e.prototype.toString=function(){return JSON.stringify(this)},e.prototype.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}();function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _={},M=function(){function e(){F(this,e)}return e.setItem=function(e,t){return _[e]=t,_[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(_,e)?_[e]:void 0},e.removeItem=function(e){return delete _[e]},e.clear=function(){return _={}},e}(),x=function(){function e(){F(this,e);try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=M}}return e.prototype.getStorage=function(){return this.storageWindow},e}();var K=i.createHmac,B=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==t||null==t.Username||null==t.Pool)throw new Error("Username and pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||(new x).getStorage()}return e.prototype.setSignInUserSession=function(e){this.clearCachedTokens(),this.signInUserSession=e,this.cacheTokens()},e.prototype.getSignInUserSession=function(){return this.signInUserSession},e.prototype.getUsername=function(){return this.username},e.prototype.getAuthenticationFlowType=function(){return this.authenticationFlowType},e.prototype.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},e.prototype.initiateAuth=function(e,t){var n=this,s=e.getAuthParameters();s.USERNAME=this.username;var r={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:e.getValidationData()};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",r,function(e,s){if(e)return t.onFailure(e);var r=s.ChallengeParameters;return"CUSTOM_CHALLENGE"===s.ChallengeName?(n.Session=s.Session,t.customChallenge(r)):(n.signInUserSession=n.getCognitoUserSession(s.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))})},e.prototype.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},e.prototype.authenticateUserDefaultAuth=function(e,t){var n=this,s=new w(this.pool.getUserPoolId().split("_")[1]),r=new N,i=void 0,u=void 0,c={};null!=this.deviceKey&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,s.getLargeAValue(function(h,l){h&&t.onFailure(h),c.SRP_A=l.toString(16),"CUSTOM_AUTH"===n.authenticationFlowType&&(c.CHALLENGE_NAME="SRP_A");var f={AuthFlow:n.authenticationFlowType,ClientId:n.pool.getClientId(),AuthParameters:c,ClientMetadata:e.getValidationData()};n.getUserContextData(n.username)&&(f.UserContextData=n.getUserContextData(n.username)),n.client.request("InitiateAuth",f,function(c,h){if(c)return t.onFailure(c);var l=h.ChallengeParameters;n.username=l.USER_ID_FOR_SRP,i=new a(l.SRP_B,16),u=new a(l.SALT,16),n.getCachedDeviceKeyAndPassword(),s.getPasswordAuthenticationKey(n.username,e.getPassword(),i,u,function(e,i){e&&t.onFailure(e);var a=r.getNowString(),u=K("sha256",i).update(o.Buffer.concat([o.Buffer.from(n.pool.getUserPoolId().split("_")[1],"utf8"),o.Buffer.from(n.username,"utf8"),o.Buffer.from(l.SECRET_BLOCK,"base64"),o.Buffer.from(a,"utf8")])).digest("base64"),c={};c.USERNAME=n.username,c.PASSWORD_CLAIM_SECRET_BLOCK=l.SECRET_BLOCK,c.TIMESTAMP=a,c.PASSWORD_CLAIM_SIGNATURE=u,null!=n.deviceKey&&(c.DEVICE_KEY=n.deviceKey);var f={ChallengeName:"PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:c,Session:h.Session};n.getUserContextData()&&(f.UserContextData=n.getUserContextData()),function e(t,s){return n.client.request("RespondToAuthChallenge",t,function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(c.DEVICE_KEY=null,n.deviceKey=null,n.randomPassword=null,n.deviceGroupKey=null,n.clearCachedDeviceKeyAndPassword(),e(t,s)):s(r,o)})}(f,function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,s,t)})})})})},e.prototype.authenticateUserPlainUsernamePassword=function(e,t){var n=this,s={};if(s.USERNAME=this.username,s.PASSWORD=e.getPassword(),s.PASSWORD){var r=new w(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var o={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:e.getValidationData()};this.getUserContextData(this.username)&&(o.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",o,function(e,s){return e?t.onFailure(e):n.authenticateUserInternal(s,r,t)})}else t.onFailure(new Error("PASSWORD parameter is required"))},e.prototype.authenticateUserInternal=function(e,t,n){var s=this,r=e.ChallengeName,i=e.ChallengeParameters;if("SMS_MFA"===r)return this.Session=e.Session,n.mfaRequired(r,i);if("SELECT_MFA_TYPE"===r)return this.Session=e.Session,n.selectMFAType(r,i);if("MFA_SETUP"===r)return this.Session=e.Session,n.mfaSetup(r,i);if("SOFTWARE_TOKEN_MFA"===r)return this.Session=e.Session,n.totpRequired(r,i);if("CUSTOM_CHALLENGE"===r)return this.Session=e.Session,n.customChallenge(i);if("NEW_PASSWORD_REQUIRED"===r){this.Session=e.Session;var a=null,u=null,c=[],h=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(i&&(a=JSON.parse(e.ChallengeParameters.userAttributes),u=JSON.parse(e.ChallengeParameters.requiredAttributes)),u)for(var l=0;u.length>l;l++)c[l]=u[l].substr(h.length);return n.newPasswordRequired(a,c)}if("DEVICE_SRP_AUTH"!==r){this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.cacheTokens();var f=e.AuthenticationResult.NewDeviceMetadata;if(null==f)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(r){if(r)return n.onFailure(r);var i={Salt:o.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:o.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=i.PasswordVerifier,s.deviceGroupKey=f.DeviceGroupKey,s.randomPassword=t.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:f.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:i,DeviceName:navigator.userAgent},function(t,r){return t?n.onFailure(t):(s.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?n.onSuccess(s.signInUserSession,r.UserConfirmationNecessary):n.onSuccess(s.signInUserSession))})})}else this.getDeviceResponse(n)},e.prototype.completeNewPasswordChallenge=function(e,t,n){var s=this;if(!e)return n.onFailure(new Error("New password is required."));var r=new w(this.pool.getUserPoolId().split("_")[1]),o=r.getNewPasswordRequiredChallengeUserAttributePrefix(),i={};t&&Object.keys(t).forEach(function(e){i[o+e]=t[e]}),i.NEW_PASSWORD=e,i.USERNAME=this.username;var a={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:i,Session:this.Session};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(e,t){return e?n.onFailure(e):s.authenticateUserInternal(t,r,n)})},e.prototype.getDeviceResponse=function(e){var t=this,n=new w(this.deviceGroupKey),s=new N,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,n.getLargeAValue(function(i,u){i&&e.onFailure(i),r.SRP_A=u.toString(16);var c={ChallengeName:"DEVICE_SRP_AUTH",ClientId:t.pool.getClientId(),ChallengeResponses:r};t.getUserContextData()&&(c.UserContextData=t.getUserContextData()),t.client.request("RespondToAuthChallenge",c,function(r,i){if(r)return e.onFailure(r);var u=i.ChallengeParameters,c=new a(u.SRP_B,16),h=new a(u.SALT,16);n.getPasswordAuthenticationKey(t.deviceKey,t.randomPassword,c,h,function(n,r){if(n)return e.onFailure(n);var a=s.getNowString(),c=K("sha256",r).update(o.Buffer.concat([o.Buffer.from(t.deviceGroupKey,"utf8"),o.Buffer.from(t.deviceKey,"utf8"),o.Buffer.from(u.SECRET_BLOCK,"base64"),o.Buffer.from(a,"utf8")])).digest("base64"),h={};h.USERNAME=t.username,h.PASSWORD_CLAIM_SECRET_BLOCK=u.SECRET_BLOCK,h.TIMESTAMP=a,h.PASSWORD_CLAIM_SIGNATURE=c,h.DEVICE_KEY=t.deviceKey;var l={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:t.pool.getClientId(),ChallengeResponses:h,Session:i.Session};t.getUserContextData()&&(l.UserContextData=t.getUserContextData()),t.client.request("RespondToAuthChallenge",l,function(n,s){return n?e.onFailure(n):(t.signInUserSession=t.getCognitoUserSession(s.AuthenticationResult),t.cacheTokens(),e.onSuccess(t.signInUserSession))})})})})},e.prototype.confirmRegistration=function(e,t,n){var s={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",s,function(e){return e?n(e,null):n(null,"SUCCESS")})},e.prototype.sendCustomChallengeAnswer=function(e,t){var n=this,s={};s.USERNAME=this.username,s.ANSWER=e;var r=new w(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var o={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",o,function(e,s){return e?t.onFailure(e):n.authenticateUserInternal(s,r,t)})},e.prototype.sendMFACode=function(e,t,n){var s=this,r={};r.USERNAME=this.username,r.SMS_MFA_CODE=e;var i=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===i&&(r.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var a={ChallengeName:i,ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(s.signInUserSession=s.getCognitoUserSession(n.AuthenticationResult),s.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(s.signInUserSession);var r=new w(s.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return t.onFailure(e);var i={Salt:o.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:o.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=i.PasswordVerifier,s.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,s.randomPassword=r.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:i,DeviceName:navigator.userAgent},function(e,r){return e?t.onFailure(e):(s.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(s.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(s.signInUserSession))})})}else s.getDeviceResponse(t)})},e.prototype.changePassword=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},e.prototype.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t){return t?e(t,null):e(null,"SUCCESS")})},e.prototype.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},e.prototype.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t){return t?e(t,null):e(null,"SUCCESS")})},e.prototype.deleteUser=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(n){return n?e(n,null):(t.clearCachedTokens(),e(null,"SUCCESS"))})},e.prototype.updateAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e},function(e){return e?t(e,null):t(null,"SUCCESS")})},e.prototype.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){if(t)return e(t,null);for(var s=[],r=0;n.UserAttributes.length>r;r++){var o=new O({Name:n.UserAttributes[r].Name,Value:n.UserAttributes[r].Value});s.push(o)}return e(null,s)})},e.prototype.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){return t?e(t,null):e(null,n.MFAOptions)})},e.prototype.getUserData=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){return t?e(t,null):e(null,n)})},e.prototype.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},e.prototype.resendConfirmationCode=function(e){var t={ClientId:this.pool.getClientId(),Username:this.username};this.client.request("ResendConfirmationCode",t,function(t,n){return t?e(t,null):e(null,n)})},e.prototype.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",s=t+".accessToken",r=t+".refreshToken",o=t+".clockDrift";if(this.storage.getItem(n)){var i=new D({IdToken:this.storage.getItem(n)}),a=new E({AccessToken:this.storage.getItem(s)}),u=new P({RefreshToken:this.storage.getItem(r)}),c=parseInt(this.storage.getItem(o),0)||0,h=new b({IdToken:i,AccessToken:a,RefreshToken:u,ClockDrift:c});if(h.isValid())return this.signInUserSession=h,e(null,this.signInUserSession);if(!u.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(u,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},e.prototype.refreshSession=function(e,t){var n=this,s={};s.REFRESH_TOKEN=e.getToken();var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+".LastAuthUser";this.storage.getItem(o)&&(this.username=this.storage.getItem(o),this.deviceKey=this.storage.getItem(r+"."+this.username+".deviceKey"),s.DEVICE_KEY=this.deviceKey);var i={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:s};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",i,function(s,r){if(s)return"NotAuthorizedException"===s.code&&n.clearCachedTokens(),t(s,null);if(r){var o=r.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),n.signInUserSession=n.getCognitoUserSession(o),n.cacheTokens(),t(null,n.signInUserSession)}})},e.prototype.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".accessToken",n=e+"."+this.username+".refreshToken",s=e+"."+this.username+".clockDrift",r=e+".LastAuthUser";this.storage.setItem(e+"."+this.username+".idToken",this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(t,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(s,""+this.signInUserSession.getClockDrift()),this.storage.setItem(r,this.username)},e.prototype.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.setItem(e+".deviceKey",this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},e.prototype.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",s=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(s))},e.prototype.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.removeItem(e+".deviceKey"),this.storage.removeItem(t),this.storage.removeItem(n)},e.prototype.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".accessToken",n=e+"."+this.username+".refreshToken",s=e+".LastAuthUser";this.storage.removeItem(e+"."+this.username+".idToken"),this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(s)},e.prototype.getCognitoUserSession=function(e){var t=new D(e),n=new E(e),s=new P(e);return new b({IdToken:t,AccessToken:n,RefreshToken:s})},e.prototype.forgotPassword=function(e){var t={ClientId:this.pool.getClientId(),Username:this.username};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",t,function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)})},e.prototype.confirmPassword=function(e,t,n){var s={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",s,function(e){return e?n.onFailure(e):n.onSuccess()})},e.prototype.getAttributeVerificationCode=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess()})},e.prototype.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},e.prototype.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(t,n){return t?e.onFailure(t):e.onSuccess(n)})},e.prototype.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},e.prototype.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},e.prototype.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")})},e.prototype.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")})},e.prototype.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("ListDevices",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e,PaginationToken:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},e.prototype.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(n){return n?e.onFailure(n):(t.clearCachedTokens(),e.onSuccess("SUCCESS"))})},e.prototype.signOut=function(){this.signInUserSession=null,this.clearCachedTokens()},e.prototype.sendMFASelectionAnswer=function(e,t){var n=this,s={};s.USERNAME=this.username,s.ANSWER=e;var r={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(s,r){return s?t.onFailure(s):(n.Session=r.Session,"SMS_MFA"===e?t.mfaRequired(r.challengeName,r.challengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(r.challengeName,r.challengeParameters):void 0)})},e.prototype.getUserContextData=function(){return this.pool.getUserContextData(this.username)},e.prototype.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(n,s){return n?e.onFailure(n):(t.Session=s.Session,e.associateSecretCode(s.SecretCode))})},e.prototype.verifySoftwareToken=function(e,t,n){var s=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return n.onFailure(e);s.Session=t.Session;var r={};r.USERNAME=s.username;var o={ChallengeName:"MFA_SETUP",ClientId:s.pool.getClientId(),ChallengeResponses:r,Session:s.Session};s.getUserContextData()&&(o.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",o,function(e,t){return e?n.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),n.onSuccess(s.signInUserSession))})})},e}(),V=H;function H(){}H.prototype.userAgent="aws-amplify/0.1.x js";var j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endpoint=n||"https://cognito-idp."+t+".amazonaws.com/",this.userAgent=V.prototype.userAgent||"aws-amplify/0.1.x js"}return e.prototype.request=function(e,t,n){var s={headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":this.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)},r=void 0,o=void 0;fetch(this.endpoint,s).then(function(e){return r=e,e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(r.ok)return n(null,e);o=e;var t=(e.__type||e.code).split("#").pop();return n({code:t,name:t,message:e.message||e.Message||null})}).catch(function(e){var t={code:"UnknownError",message:"Unknown error, the response body from fetch is: "+o};if(r&&r.headers&&r.headers.get("x-amzn-errortype"))try{var s=r.headers.get("x-amzn-errortype").split(":")[0];t={code:s,name:s,statusCode:r.status,message:r.status?r.status.toString():null}}catch(e){return t={code:"UnknownError",message:r.headers.get("x-amzn-errortype")},n(t)}else e instanceof Error&&"Network error"===e.message&&(t={code:"NetworkError",name:e.name,message:e.message});return n(t)})},e}();var L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},s=n.UserPoolId,r=n.ClientId,o=n.endpoint,i=n.AdvancedSecurityDataCollectionFlag;if(!s||!r)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(s))throw new Error("Invalid UserPoolId format.");var a=s.split("_")[0];this.userPoolId=s,this.clientId=r,this.client=new j(a,o),this.advancedSecurityDataCollectionFlag=!1!==i,this.storage=t.Storage||(new x).getStorage()}return e.prototype.getUserPoolId=function(){return this.userPoolId},e.prototype.getClientId=function(){return this.clientId},e.prototype.signUp=function(e,t,n,s,r){var o=this,i={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:s};this.getUserContextData(e)&&(i.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",i,function(t,n){if(t)return r(t,null);var s={user:new B({Username:e,Pool:o,Storage:o.storage}),userConfirmed:n.UserConfirmed,userSub:n.UserSub};return r(null,s)})},e.prototype.getCurrentUser=function(){var e=this.storage.getItem("CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser");return e?new B({Username:e,Pool:this,Storage:this.storage}):null},e.prototype.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),q=n("p46w");var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain=t.domain,this.path=t.path?t.path:"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?t.expires:365,this.secure=!Object.prototype.hasOwnProperty.call(t,"secure")||t.secure}return e.prototype.setItem=function(e,t){return q.set(e,t,{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure}),q.get(e)},e.prototype.getItem=function(e){return q.get(e)},e.prototype.removeItem=function(e){return q.remove(e,{path:this.path,domain:this.domain,secure:this.secure})},e.prototype.clear=function(){var e=q.get(),t=void 0;for(t=0;e.length>t;++t)q.remove(e[t]);return{}},e}();n.d(t,"AuthenticationDetails",function(){return r}),n.d(t,"AuthenticationHelper",function(){return w}),n.d(t,"CognitoAccessToken",function(){return E}),n.d(t,"CognitoIdToken",function(){return D}),n.d(t,"CognitoRefreshToken",function(){return P}),n.d(t,"CognitoUser",function(){return B}),n.d(t,"CognitoUserAttribute",function(){return O}),n.d(t,"CognitoUserPool",function(){return L}),n.d(t,"CognitoUserSession",function(){return b}),n.d(t,"CookieStorage",function(){return G}),n.d(t,"DateHelper",function(){return N})},WnBX:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))(function(r,o){function i(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,a)}u((s=s.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,s,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,s&&(r=2&o[0]?s.return:o[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,o[1])).done)return r;switch(s=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,s=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&r[3]>o[1])){i.label=o[1];break}if(6===o[0]&&r[1]>i.label){i.label=r[1],r=o;break}if(r&&r[2]>i.label){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],s=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n("wAFy"),i=n("TESy"),a=n("ColZ"),u=new o.ConsoleLogger("AuthClass"),c=function(e,t){o.Hub.dispatch("auth",{event:e,data:t},"Auth")},h=function(){function e(e){this.userPool=null,this._cognitoAuthClient=null,this.user=null,this._gettingCredPromise=null,this.configure(e),this.currentUserCredentials=this.currentUserCredentials.bind(this),o.AWS.config?o.AWS.config.update({customUserAgent:o.Constants.userAgent}):u.warn("No AWS.config")}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};u.debug("configure Auth");var n=Object.assign({},this._config,o.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var h=this._config,l=h.userPoolId,f=h.userPoolWebClientId,g=h.cookieStorage,p=h.oauth,d=h.region,S=h.identityPoolId,C=h.mandatorySignIn,m=h.refreshHandlers,y=h.identityPoolRegion;if(this._storage=this._config.storage?this._config.storage:g?new i.CookieStorage(g):(new o.StorageHelper).getStorage(),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),l){var v={UserPoolId:l,ClientId:f};v.Storage=this._storage,this.userPool=new i.CognitoUserPool(v)}if(o.Credentials.configure({mandatorySignIn:C,region:y||d,userPoolId:l,identityPoolId:S,refreshHandlers:m,storage:this._storage}),p){var A=this,T=Object.assign({ClientId:f,UserPoolId:l,AppWebDomain:p.domain,TokenScopesArray:p.scope,RedirectUriSignIn:p.redirectSignIn,RedirectUriSignOut:p.redirectSignOut,ResponseType:p.responseType,Storage:this._storage},p.options);u.debug("cognito auth params",T),this._cognitoAuthClient=new a.CognitoAuth(T),this._cognitoAuthClient.userhandler={onSuccess:function(e){A.user=A.userPool.getCurrentUser(),u.debug("Cognito Hosted authentication result",e),A.currentSession().then(function(e){return s(t,void 0,void 0,function(){var t,n;return r(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,4,5]),[4,o.Credentials.clear()];case 1:return s.sent(),[4,o.Credentials.set(e,"session")];case 2:return t=s.sent(),u.debug("sign in succefully with",t),[3,5];case 3:return n=s.sent(),u.debug("sign in without aws credentials",n),[3,5];case 4:return c("signIn",A.user),c("cognitoHostedUI",A.user),[7];case 5:return[2]}})})})},onFailure:function(e){u.debug("Error in cognito hosted auth response",e),c("signIn_failure",e)}},this.currentAuthenticatedUser().then(function(){u.debug("user already logged in")}).catch(function(e){u.debug("not logged in, try to parse the url");var n=window.location.href;t._cognitoAuthClient.parseCognitoWebResponse(n)})}return c("configured",null),this._config},e.prototype.signUp=function(e){for(var t=this,n=[],s=1;arguments.length>s;s++)n[s-1]=arguments[s];if(!this.userPool)return Promise.reject("No userPool");var r=null,o=null,i=[],a=null;if(e&&"string"==typeof e){r=e,o=n?n[0]:null;var h=n?n[1]:null,l=n?n[2]:null;h&&i.push({Name:"email",Value:h}),l&&i.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return Promise.reject("The first parameter should either be non-null string or object");r=e.username,o=e.password;var f=e.attributes;f&&Object.keys(f).map(function(e){i.push({Name:e,Value:f[e]})}),a=e.validationData||null}return r?o?(u.debug("signUp attrs:",i),u.debug("signUp validation data:",a),new Promise(function(e,n){t.userPool.signUp(r,o,i,a,function(t,s){t?(c("signUp_failure",t),n(t)):(c("signUp",s),e(s))})})):Promise.reject("Password cannot be empty"):Promise.reject("Username cannot be empty")},e.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return Promise.reject("No userPool");if(!e)return Promise.reject("Username cannot be empty");if(!t)return Promise.reject("Code cannot be empty");var s=this.createCognitoUser(e),r=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return new Promise(function(e,n){s.confirmRegistration(t,r,function(t,s){t?n(t):e(s)})})},e.prototype.resendSignUp=function(e){if(!this.userPool)return Promise.reject("No userPool");if(!e)return Promise.reject("Username cannot be empty");var t=this.createCognitoUser(e);return new Promise(function(e,n){t.resendConfirmationCode(function(t,s){t?n(t):e(s)})})},e.prototype.signIn=function(e,t){return this.userPool?e?t?this.signInWithPassword(e,t):this.signInWithoutPassword(e):Promise.reject("Username cannot be empty"):Promise.reject("No userPool")},e.prototype.authCallbacks=function(e,t,n){var i=this,a=this;return{onSuccess:function(n){return s(i,void 0,void 0,function(){var s,i;return r(this,function(r){switch(r.label){case 0:u.debug(n),delete e.challengeName,delete e.challengeParam,r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,o.Credentials.clear()];case 2:return r.sent(),[4,o.Credentials.set(n,"session")];case 3:return s=r.sent(),u.debug("succeed to get cognito credentials",s),[3,6];case 4:return i=r.sent(),u.debug("cannot get cognito credentials",i),[3,6];case 5:return a.user=e,c("signIn",e),t(e),[7];case 6:return[2]}})})},onFailure:function(e){u.debug("signIn failure",e),c("signIn_failure",e),n(e)},customChallenge:function(n){u.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,s){u.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=s,t(e)},mfaSetup:function(n,s){u.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=s,t(e)},newPasswordRequired:function(n,s){u.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:s},t(e)},totpRequired:function(n,s){u.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=s,t(e)},selectMFAType:function(n,s){u.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=s,t(e)}}},e.prototype.signInWithPassword=function(e,t){var n=this,s=this.createCognitoUser(e),r=new i.AuthenticationDetails({Username:e,Password:t});return new Promise(function(e,t){s.authenticateUser(r,n.authCallbacks(s,e,t))})},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e);n.setAuthenticationFlowType("CUSTOM_AUTH");var s=new i.AuthenticationDetails({Username:e});return new Promise(function(e,r){n.initiateAuth(s,t.authCallbacks(n,e,r))})},e.prototype.getMFAOptions=function(e){return new Promise(function(t,n){e.getMFAOptions(function(e,s){if(e)return u.debug("get MFA Options failed",e),void n(e);u.debug("get MFA options success",s),t(s)})})},e.prototype.getPreferredMFA=function(e){var t=this;return new Promise(function(n,s){e.getUserData(function(e,r){if(e)return u.debug("getting preferred mfa failed",e),void s(e);var o=t._getMfaTypeFromUserData(r);return o?void n(o):void s("invalid MFA Type")})})},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var s=e.UserMFASettingList;if(s)0===s.length?t="NOMFA":u.debug("invalid case for getPreferredMFA",e);else t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e){return new Promise(function(t,n){e.getUserData(function(e,s){return e?(u.debug("getting user data failed",e),void n(e)):void t(s)})})},e.prototype.setPreferredMFA=function(e,t){return s(this,void 0,void 0,function(){var n,s,o,i,a;return r(this,function(r){switch(r.label){case 0:return[4,this._getUserData(e)];case 1:switch(n=r.sent(),s=null,o=null,t){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return i=n.UserMFASettingList,[4,this._getMfaTypeFromUserData(n)];case 5:if("NOMFA"===(a=r.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===a)s={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==a)return[2,Promise.reject("invalid MFA type")];o={PreferredMfa:!1,Enabled:!1}}return i&&0!==i.length&&i.forEach(function(e){"SMS_MFA"===e?s={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(o={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return u.debug("no validmfa method provided"),[2,Promise.reject("no validmfa method provided")];case 7:return this,[2,new Promise(function(t,n){e.setUserMfaPreference(s,o,function(e,s){if(e)return u.debug("Set user mfa preference error",e),void n(e);u.debug("Set user mfa success",s),t(s)})})]}})})},e.prototype.disableSMS=function(e){return new Promise(function(t,n){e.disableMFA(function(e,s){if(e)return u.debug("disable mfa failed",e),void n(e);u.debug("disable mfa succeed",s),t(s)})})},e.prototype.enableSMS=function(e){return new Promise(function(t,n){e.enableMFA(function(e,s){if(e)return u.debug("enable mfa failed",e),void n(e);u.debug("enable mfa succeed",s),t(s)})})},e.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){u.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){u.debug("associateSoftwareToken sucess",e),t(e)}})})},e.prototype.verifyTotpToken=function(e,t){return u.debug("verfication totp token",e,t),new Promise(function(n,s){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){u.debug("verifyTotpToken failed",e),s(e)},onSuccess:function(e){u.debug("verifyTotpToken success",e),n(e)}})})},e.prototype.confirmSignIn=function(e,t,n){var i=this;if(!t)return Promise.reject("Code cannot be empty");var a=this;return new Promise(function(h,l){e.sendMFACode(t,{onSuccess:function(t){return s(i,void 0,void 0,function(){var n,s;return r(this,function(r){switch(r.label){case 0:u.debug(t),r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,o.Credentials.clear()];case 2:return r.sent(),[4,o.Credentials.set(t,"session")];case 3:return n=r.sent(),u.debug("succeed to get cognito credentials",n),[3,6];case 4:return s=r.sent(),u.debug("cannot get cognito credentials",s),[3,6];case 5:return a.user=e,c("signIn",e),h(e),[7];case 6:return[2]}})})},onFailure:function(e){u.debug("confirm signIn failure",e),l(e)}},n)})},e.prototype.completeNewPassword=function(e,t,n){var i=this;if(!t)return Promise.reject("Password cannot be empty");var a=this;return new Promise(function(h,l){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return s(i,void 0,void 0,function(){var n,s;return r(this,function(r){switch(r.label){case 0:u.debug(t),r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,o.Credentials.clear()];case 2:return r.sent(),[4,o.Credentials.set(t,"session")];case 3:return n=r.sent(),u.debug("succeed to get cognito credentials",n),[3,6];case 4:return s=r.sent(),u.debug("cannot get cognito credentials",s),[3,6];case 5:return a.user=e,c("signIn",e),h(e),[7];case 6:return[2]}})})},onFailure:function(e){u.debug("completeNewPassword failure",e),c("completeNewPassword_failure",e),l(e)},mfaRequired:function(t,n){u.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,h(e)},mfaSetup:function(t,n){u.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,h(e)}})})},e.prototype.sendCustomChallengeAnswer=function(e,t){var n=this;if(!this.userPool)return Promise.reject("No userPool");if(!t)return Promise.reject("Challenge response cannot be empty");return new Promise(function(s,r){e.sendCustomChallengeAnswer(t,n.authCallbacks(e,s,r))})},e.prototype.updateUserAttributes=function(e,t){var n=[];return this.userSession(e).then(function(s){return new Promise(function(s,r){for(var o in t)"sub"!==o&&0>o.indexOf("_verified")&&n.push({Name:o,Value:t[o]});e.updateAttributes(n,function(e,t){return e?void r(e):void s(t)})})})},e.prototype.userAttributes=function(e){return this.userSession(e).then(function(t){return new Promise(function(t,n){e.getUserAttributes(function(e,s){e?n(e):t(s)})})})},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then(function(e){var n=t.attributesToObject(e),s={},r={};return n.email&&(n.email_verified?r.email=n.email:s.email=n.email),n.phone_number&&(n.phone_number_verified?r.phone_number=n.phone_number:s.phone_number=n.phone_number),{verified:r,unverified:s}})},e.prototype.currentUserPoolUser=function(){var e=this;if(!this.userPool)return Promise.reject("No userPool");var t=this;return new Promise(function(n,s){e._storageSync.then(function(){var r=t.userPool.getCurrentUser();if(!r)return u.debug("Failed to get user from user pool"),void s("No current user");r.getSession(function(e,t){if(e)return u.debug("Failed to get the user session",e),void s(e)}),r.getUserData(function(t,o){if(t)return u.debug("getting user data failed",t),void("User is disabled"===t.message||"User does not exist."===t.message?s(t):n(r));for(var a=o.PreferredMfaSetting||"NOMFA",c=[],h=0;o.UserAttributes.length>h;h++){var l=new i.CognitoUserAttribute({Name:o.UserAttributes[h].Name,Value:o.UserAttributes[h].Value});c.push(l)}var f=e.attributesToObject(c);Object.assign(r,{attributes:f,preferredMFA:a}),n(r)})})})},e.prototype.currentAuthenticatedUser=function(){return s(this,void 0,void 0,function(){var e,t,n;return r(this,function(s){switch(s.label){case 0:u.debug("getting current authenticted user"),e=null;try{e=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user}catch(e){u.debug("cannot load federated user from auth storage")}return e?(this.user=e,u.debug("get current authenticated federated user",this.user),[2,this.user]):[3,1];case 1:u.debug("get current authenticated userpool user"),t=null,s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.currentUserPoolUser()];case 3:return t=s.sent(),[3,5];case 4:throw n=s.sent(),u.debug("The user is not authenticated by the error",n),"not authenticated";case 5:return this.user=t,[2,this.user]}})})},e.prototype.currentSession=function(){var e=this;return u.debug("Getting current session"),this.userPool?new Promise(function(t,n){e.currentUserPoolUser().then(function(s){e.userSession(s).then(function(e){t(e)}).catch(function(e){u.debug("Failed to get the current session",e),n(e)})}).catch(function(e){u.debug("Failed to get the current user",e),n(e)})}):Promise.reject("No userPool")},e.prototype.userSession=function(e){return e?new Promise(function(t,n){u.debug("Getting the session from this user:",e),e.getSession(function(s,r){return s?(u.debug("Failed to get the session from user",e),void n(s)):(u.debug("Succeed to get the user session",r),void t(r))})}):(u.debug("the user is null"),Promise.reject("Failed to get the session because the user is empty"))},e.prototype.currentUserCredentials=function(){u.debug("Getting current user credentials");var e=null;try{e=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){u.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return e?o.Credentials.refreshFederatedToken(e):this.currentSession().then(function(e){return u.debug("getting session success",e),o.Credentials.set(e,"session")}).catch(function(e){return u.debug("getting session failed",e),o.Credentials.set(null,"guest")})},e.prototype.currentCredentials=function(){return u.debug("getting current credntials"),o.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t){return new Promise(function(n,s){e.getAttributeVerificationCode(t,{onSuccess:function(e){n(e)},onFailure:function(e){s(e)}})})},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise(function(s,r){e.verifyAttribute(t,n,{onSuccess:function(e){s(e)},onFailure:function(e){r(e)}})}):Promise.reject("Code cannot be empty")},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then(function(n){return t.verifyUserAttribute(n,e)})},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then(function(s){return n.verifyUserAttributeSubmit(s,e,t)})},e.prototype.signOut=function(){return s(this,void 0,void 0,function(){var e,t,n=this;return r(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return i.sent(),[3,3];case 2:return i.sent(),u.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(e=this.userPool.getCurrentUser())&&(u.debug("user sign out",e),e.signOut(),this._cognitoAuthClient&&this._cognitoAuthClient.signOut()):u.debug("no Congito User pool"),t=this,[2,new Promise(function(e,i){return s(n,void 0,void 0,function(){var n;return r(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),[4,o.Credentials.set(null,"guest")];case 1:return s.sent(),[3,4];case 2:return n=s.sent(),u.debug("cannot load guest credentials for unauthenticated user",n),[3,4];case 3:return c("signOut",t.user),t.user=null,e(),[7];case 4:return[2]}})})})]}})})},e.prototype.cleanCachedItems=function(){return s(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,o.Credentials.clear()];case 1:return e.sent(),[2]}})})},e.prototype.changePassword=function(e,t,n){return this.userSession(e).then(function(s){return new Promise(function(s,r){e.changePassword(t,n,function(e,t){return e?(u.debug("change password failure",e),void r(e)):void s(t)})})})},e.prototype.forgotPassword=function(e){if(!this.userPool)return Promise.reject("No userPool");if(!e)return Promise.reject("Username cannot be empty");var t=this.createCognitoUser(e);return new Promise(function(e,n){t.forgotPassword({onSuccess:function(){e()},onFailure:function(e){u.debug("forgot password failure",e),n(e)},inputVerificationCode:function(t){e(t)}})})},e.prototype.forgotPasswordSubmit=function(e,t,n){if(!this.userPool)return Promise.reject("No userPool");if(!e)return Promise.reject("Username cannot be empty");if(!t)return Promise.reject("Code cannot be empty");if(!n)return Promise.reject("Password cannot be empty");var s=this.createCognitoUser(e);return new Promise(function(e,r){s.confirmPassword(t,n,{onSuccess:function(){e()},onFailure:function(e){r(e)}})})},e.prototype.currentUserInfo=function(){return s(this,void 0,void 0,function(){var e,t,n,s,i,a,c;return r(this,function(r){switch(r.label){case 0:return(e=o.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return u.debug(e)})];case 1:if(!(c=r.sent()))return[2,null];r.label=2;case 2:return r.trys.push([2,8,,9]),[4,this.userAttributes(c)];case 3:t=r.sent(),n=this.attributesToObject(t),s=null,r.label=4;case 4:return r.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return s=r.sent(),[3,7];case 6:return i=r.sent(),u.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:s?s.identityId:void 0,username:c.username,attributes:n}];case 8:return a=r.sent(),u.debug("currentUserInfo error",a),[2,{}];case 9:return"federated"===e?[2,(c=this.user)||{}]:[2]}})})},e.prototype.federatedSignIn=function(e,t,n){var s=t.token,r=t.identity_id,i=t.expires_at,a=this;return new Promise(function(t,h){o.Credentials.set({provider:e,token:s,identity_id:r,user:n,expires_at:i},"federation").then(function(e){c("signIn",a.user),u.debug("federated sign in credentials",e),t(e)}).catch(function(e){h(e)})})},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"sub"!==e.Name&&(t[e.Name]="true"===e.Value||"false"!==e.Value&&e.Value)}),t},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,s=new i.CognitoUser(t);return n&&s.setAuthenticationFlowType(n),s},e}();t.default=h},aAgK:function(e,t,n){var s=n("tjlA").Buffer,r=n("cgAd"),o=n("8010"),i=n("28sT"),a={sha1:r,sha256:o,md5:n("CnK9")},u=64,c=new s(u);function h(e,t){var n=a[e=e||"sha1"],r=[];return n||l("algorithm:",e,"is not yet supported"),{update:function(e){return s.isBuffer(e)||(e=new s(e)),r.push(e),e.length,this},digest:function(e){var o=s.concat(r),i=t?function(e,t,n){s.isBuffer(t)||(t=new s(t)),s.isBuffer(n)||(n=new s(n)),t.length>u?t=e(t):u>t.length&&(t=s.concat([t,c],u));for(var r=new s(u),o=new s(u),i=0;u>i;i++)r[i]=54^t[i],o[i]=92^t[i];var a=e(s.concat([r,n]));return e(s.concat([o,a]))}(n,t,o):n(o);return r=null,e?i.toString(e):i}}}function l(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}c.fill(0),t.createHash=function(e){return h(e)},t.createHmac=function(e,t){return h(e,t)},t.randomBytes=function(e,t){if(!t||!t.call)return new s(i(e));try{t.call(this,void 0,new s(i(e)))}catch(e){t(e)}},function(e,t){for(var n in e)t(e[n],n)}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){t[e]=function(){l("sorry,",e,"is not implemented yet")}})},cgAd:function(e,t,n){var s=n("S0xZ");function r(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n=Array(80),s=1732584193,r=-271733879,c=-1732584194,h=271733878,l=-1009589776,f=0;e.length>f;f+=16){for(var g=s,p=r,d=c,S=h,C=l,m=0;80>m;m++){n[m]=16>m?e[f+m]:u(n[m-3]^n[m-8]^n[m-14]^n[m-16],1);var y=a(a(u(s,5),o(m,r,c,h)),a(a(l,n[m]),i(m)));l=h,h=c,c=u(r,30),r=s,s=y}s=a(s,g),r=a(r,p),c=a(c,d),h=a(h,S),l=a(l,C)}return Array(s,r,c,h,l)}function o(e,t,n,s){return 20>e?t&n|~t&s:40>e?t^n^s:60>e?t&n|t&s|n&s:t^n^s}function i(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function a(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function u(e,t){return e<<t|e>>>32-t}e.exports=function(e){return s.hash(e,r,20,!0)}},"lJH/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("WnBX");t.AuthClass=s.default;var r=n("TESy");t.CookieStorage=r.CookieStorage;var o=n("wAFy"),i=new o.ConsoleLogger("Auth"),a=null;a||(i.debug("Create Auth Instance"),a=new s.default(null));var u=a;o.default.register(u),t.default=u},p46w:function(e,t,n){var s,r;!function(o){if(void 0===(r="function"==typeof(s=o)?s.call(t,n,t,e):s)||(e.exports=r),!0,e.exports=o(),!!0){var i=window.Cookies,a=window.Cookies=o();a.noConflict=function(){return window.Cookies=i,a}}}(function(){function e(){for(var e=0,t={};arguments.length>e;e++){var n=arguments[e];for(var s in n)t[s]=n[s]}return t}return function t(n){function s(t,r,o){var i;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},s.defaults,o)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}o.expires=o.expires?o.expires.toUTCString():"";try{i=JSON.stringify(r),/^[\{\[]/.test(i)&&(r=i)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var u="";for(var c in o)o[c]&&(u+="; "+c,!0!==o[c]&&(u+="="+o[c]));return document.cookie=t+"="+r+u}t||(i={});for(var h=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,f=0;h.length>f;f++){var g=h[f].split("="),p=g.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var d=g[0].replace(l,decodeURIComponent);if(p=n.read?n.read(p,d):n(p,d)||p.replace(l,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===d){i=p;break}t||(i[d]=p)}catch(e){}}return i}}return s.set=s,s.get=function(e){return s.call(s,e)},s.getJSON=function(){return s.apply({json:!0},[].slice.call(arguments))},s.defaults={},s.remove=function(t,n){s(t,"",e(n,{expires:-1}))},s.withConverter=t,s}(function(){})})}}]);
//# sourceMappingURL=vendors~auth.63a447f082e6ded9ee63.js.map