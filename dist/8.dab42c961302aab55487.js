(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+9Jb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parser=function(e){var t,n,i,s=a.get(e);if(s)return s;r(!!e&&!!e.kind,"Argument of "+e+" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document");var u=e.definitions.filter(function(e){return"FragmentDefinition"===e.kind}),c=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"query"===e.operation}),l=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}),p=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation});r(!u.length||c.length||l.length||p.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"),r(1>=c.length+l.length+p.length,"react-apollo only supports a query, subscription, or a mutation per HOC. "+e+" had "+c.length+" queries, "+p.length+" subscriptions and "+l.length+" mutations. You can use 'compose' to join multiple operation types to a component"),n=c.length?o.Query:o.Mutation,c.length||l.length||(n=o.Subscription);var f=c.length?c:l.length?l:p;r(1===f.length,"react-apollo only supports one defintion per HOC. "+e+" had "+f.length+" definitions. You can use 'compose' to join multiple operation types to a component");var d=f[0];t=d.variableDefinitions||[],i=d.name&&"Name"===d.name.kind?d.name.value:"data";var y={name:i,type:n,variables:t};return a.set(e,y),y};var r=n("QLaP"),o=t.DocumentType=void 0;!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(o||(t.DocumentType=o={}));var a=new Map},"+vwK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClient=function(e,t){var n=e.client||t.client;return r(!!n,'Could not find "client" in the context or passed in as a prop. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via props.'),n};var r=n("QLaP")},"9D75":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n("q1tI")),a=i(n("zGII"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;o>i;i++)a[i]=arguments[i];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={atBottom:!1},r.componentDidMount=function(){r.props.subscribeToNewMessages()},r.handleScroll=function(e){var t=e.target;t.scrollHeight-100>t.offsetHeight+t.scrollTop||3===r.props.networkStatus||!1!==r.state.atBottom?t.offsetHeight+t.scrollTop>t.scrollHeight-100||3===r.props.networkStatus||!0!==r.state.atBottom||r.setState({atBottom:!1}):(r.setState({atBottom:!0}),r.props.nextToken&&r.props.fetchMore(r.props.nextToken))},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){return o.default.createElement("div",{onScroll:this.handleScroll,style:{flex:"30",padding:"0 10px",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"flex-end",minHeight:"0"}},this.props.messages.map(function(e){return o.default.createElement(a.default,{key:e.createdAt,createdAt:e.createdAt,username:e.username},e.content)}))}}]),t}();t.default=u},Dm0L:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.freeze(Object.defineProperties(["\nquery listMessages($conversation: String!, $count: Int, $nextToken: String) {\n    listMessages(conversation: $conversation, count: $count, nextToken: $nextToken) {\n        messages {\n            __typename\n            id\n            content\n            createdAt\n            username\n        }\n        nextToken\n    }\n}"],{raw:{value:Object.freeze(["\nquery listMessages($conversation: String!, $count: Int, $nextToken: String) {\n    listMessages(conversation: $conversation, count: $count, nextToken: $nextToken) {\n        messages {\n            __typename\n            id\n            content\n            createdAt\n            username\n        }\n        nextToken\n    }\n}"])}})),a=n("lTCR"),i=(r=a)&&r.__esModule?r:{default:r};t.default=(0,i.default)(o)},JjuI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.freeze(Object.defineProperties(["\n    subscription NewMessage {\n    newMessage {\n        __typename\n        id\n        content\n        createdAt\n        username\n    }\n}"],{raw:{value:Object.freeze(["\n    subscription NewMessage {\n    newMessage {\n        __typename\n        id\n        content\n        createdAt\n        username\n    }\n}"])}})),a=n("lTCR"),i=(r=a)&&r.__esModule?r:{default:r};t.default=(0,i.default)(o)},NtJX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("q1tI")),o=u(n("eKik")),a=u(n("Dm0L")),i=u(n("JjuI")),s=u(n("9D75"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function(){return r.default.createElement(o.default,{query:a.default,variables:{conversation:"main",count:8},ssr:!0},function(e){var t=e.error,n=e.data,o=e.subscribeToMore,a=e.fetchMore;return e.loading?"Loading...":t?"Error! "+t.message:r.default.createElement(s.default,{messages:n.listMessages.messages,networkStatus:e.networkStatus,nextToken:n.listMessages.nextToken,fetchMore:function(e){return a({variables:{conversation:"main",count:8,nextToken:e},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?Object.assign({},e,{listMessages:{messages:[].concat(c(e.listMessages.messages),c(n.listMessages.messages)),nextToken:n.listMessages.nextToken,__typename:"PaginatedMessages"}}):e}})},subscribeToNewMessages:function(){return o({document:i.default,variables:{conversation:"main"},updateQuery:function(e,t){var n=t.subscriptionData;return n.data?Object.assign({},e,{listMessages:{messages:[n.data.newMessage].concat(c(e.listMessages.messages)),nextToken:e.listMessages.nextToken,__typename:"PaginatedMessages"}}):e}})}})})}},eKik:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("q1tI")),o=u(n("17x9")),a=n("lmy8"),i=n("+9Jb"),s=n("+vwK");function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var c,l=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);r.length>o;o++)0>t.indexOf(r[o])&&(n[r[o]]=e[r[o]])}return n},d=n("WxMN"),y=n("QLaP");var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.previousData={},r.hasMounted=!1,r.startQuerySubscription=function(){if(!r.querySubscription){var e=r.getQueryResult();r.querySubscription=r.queryObservable.subscribe({next:function(t){e&&7===e.networkStatus&&d(e.data,t.data)?e=void 0:(e=void 0,r.updateCurrentData())},error:function(e){if(r.resubscribeToQuery(),!e.hasOwnProperty("graphQLErrors"))throw e;r.updateCurrentData()}})}},r.removeQuerySubscription=function(){r.querySubscription&&(r.querySubscription.unsubscribe(),delete r.querySubscription)},r.updateCurrentData=function(){r.hasMounted&&r.forceUpdate()},r.getQueryResult=function(){var e,t={data:Object.create(null)};if(Object.assign(t,{variables:(e=r.queryObservable).variables,refetch:e.refetch.bind(e),fetchMore:e.fetchMore.bind(e),updateQuery:e.updateQuery.bind(e),startPolling:e.startPolling.bind(e),stopPolling:e.stopPolling.bind(e),subscribeToMore:e.subscribeToMore.bind(e)}),r.props.skip)t=p({},t,{data:void 0,error:void 0,loading:!1});else{var n=r.queryObservable.currentResult(),o=n.loading,i=n.partial,s=n.networkStatus,u=n.errors,c=n.error;if(u&&u.length>0&&(c=new a.ApolloError({graphQLErrors:u})),Object.assign(t,{loading:o,networkStatus:s,error:c}),o)Object.assign(t.data,r.previousData,n.data);else if(c)Object.assign(t,{data:(r.queryObservable.getLastResult()||{}).data});else{var l=r.queryObservable.options.fetchPolicy;if(r.props.partialRefetch&&0===Object.keys(n.data).length&&i&&"cache-only"!==l)return Object.assign(t,{loading:!0}),t.refetch(),t;Object.assign(t.data,n.data),r.previousData=n.data}}if(!r.querySubscription){var f=t.refetch;t.refetch=function(e){return r.querySubscription?f(e):new Promise(function(t,n){r.refetcherQueue={resolve:t,reject:n,args:e}})}}return t.client=r.client,t},r.client=(0,s.getClient)(t,n),r.initializeQueryObservable(t),r}return l(t,e),t.prototype.fetchData=function(){if(this.props.skip)return!1;var e=this.props,t=e.ssr,n=f(e,["children","ssr","displayName","skip","client","onCompleted","onError","partialRefetch"]),r=n.fetchPolicy;if(!1===t)return!1;"network-only"!==r&&"cache-and-network"!==r||(r="cache-first");var o=this.client.watchQuery(p({},n,{fetchPolicy:r}));return!!this.queryObservable.currentResult().loading&&o.result()},t.prototype.componentDidMount=function(){if(this.hasMounted=!0,!this.props.skip&&(this.startQuerySubscription(),this.refetcherQueue)){var e=this.refetcherQueue,t=e.resolve,n=e.reject;this.queryObservable.refetch(e.args).then(t).catch(n)}},t.prototype.componentWillReceiveProps=function(e,t){if(!e.skip||this.props.skip){var n=(0,s.getClient)(e,t);d(this.props,e)&&this.client===n||(this.client!==n&&(this.client=n,this.removeQuerySubscription(),this.queryObservable=null,this.previousData={},this.updateQuery(e)),this.props.query!==e.query&&this.removeQuerySubscription(),this.updateQuery(e),e.skip||this.startQuerySubscription())}else this.removeQuerySubscription()},t.prototype.componentWillUnmount=function(){this.removeQuerySubscription(),this.hasMounted=!1},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.onCompleted,n=e.onError;if(t||n){var r=this.queryObservable.currentResult(),o=r.loading,a=r.error,i=r.data;!t||o||a?n&&!o&&a&&n(a):t(i)}},t.prototype.render=function(){return(0,this.props.children)(this.getQueryResult())},t.prototype.extractOptsFromProps=function(e){var t,n=e.variables,r=e.pollInterval,o=e.fetchPolicy,a=e.errorPolicy,s=e.notifyOnNetworkStatusChange,u=e.query,c=e.displayName,l=void 0===c?"Query":c,p=e.context,f=void 0===p?{}:p;return this.operation=(0,i.parser)(u),y(this.operation.type===i.DocumentType.Query,"The <Query /> component requires a graphql query, but got a "+(this.operation.type===i.DocumentType.Mutation?"mutation":"subscription")+"."),t={variables:n,pollInterval:r,query:u,fetchPolicy:o,errorPolicy:a,notifyOnNetworkStatusChange:s,metadata:{reactComponent:{displayName:l}},context:f},Object.keys(t).reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{})},t.prototype.initializeQueryObservable=function(e){var t=this.extractOptsFromProps(e);this.setOperations(t),this.queryObservable=this.client.watchQuery(t)},t.prototype.setOperations=function(e){this.context.operations&&this.context.operations.set(this.operation.name,{query:e.query,variables:e.variables})},t.prototype.updateQuery=function(e){this.queryObservable?this.setOperations(e):this.initializeQueryObservable(e),this.queryObservable.setOptions(this.extractOptsFromProps(e)).catch(function(){return null})},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.queryObservable.getLastError(),t=this.queryObservable.getLastResult();this.queryObservable.resetLastResults(),this.startQuerySubscription(),Object.assign(this.queryObservable,{lastError:e,lastResult:t})},t.contextTypes={client:o.object,operations:o.object},t.propTypes={client:o.object,children:o.func.isRequired,fetchPolicy:o.string,notifyOnNetworkStatusChange:o.bool,onCompleted:o.func,onError:o.func,pollInterval:o.number,query:o.object.isRequired,variables:o.object,ssr:o.bool,partialRefetch:o.bool},t}(r.Component);t.default=h},zGII:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("q1tI"),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.children,n=e.createdAt;return a.default.createElement("div",{style:{backgroundColor:"rgba(220,255,255,0.8)",border:"1px solid lightgrey",borderRadius:"5px",margin:"10px 0",padding:"6px 7px 3px 11px",boxShadow:"1px 2px 2px #888888"}},a.default.createElement("div",{style:{textAlign:"start",fontWeight:"bold",color:"lightcoral"}},e.username),a.default.createElement("div",{style:{textAlign:"start",fontSize:"16px",marginTop:"2px",paddingLeft:"5px"}},t),a.default.createElement("div",{style:{textAlign:"end",fontSize:"10px",color:"grey"}},n))}},zldw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n("14Xm")),o=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=c(n("q1tI")),i=c(n("NtJX")),s=c(n("CnBM")),u=c(n("QLAq"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(0,s.default)({loader:function(){return Promise.all([n.e(5),n.e(25),n.e(22)]).then(n.t.bind(null,"DH4Y",7))},modules:["../mdc/TextArea"],webpack:function(){return["DH4Y"]},loading:u.default}),f=function(e){function t(){var e,n,o,a,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=Array(s),c=0;s>c;c++)u[c]=arguments[c];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.state={message:"",username:""},o.handleChange=function(e){o.setState({message:e.target.value})},o.clearMessage=function(){o.setState({message:""})},o.callApi=(a=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}),function(){var e=a.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});t(s)}("next")})}),l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),o(t,[{key:"componentDidMount",value:function(){this.callApi()}},{key:"render",value:function(){var e=this.state.message,t=this.props.username;return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,null),a.default.createElement(p,{content:e,user:t,handleChange:this.handleChange.bind(this),clearMessage:this.clearMessage.bind(this)}))}}]),t}();t.default=f}}]);
//# sourceMappingURL=8.dab42c961302aab55487.js.map